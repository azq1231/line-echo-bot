import{r as c,c as A,o as Ut,a as At,b as i,d as a,e as l,f,g as Ot,t as p,n as $,F as C,h as S,i as rt,w as _,j as Tt,v as Mt,k as jt,l as Wt}from"./runtime-dom.esm-bundler-jAXvPR8n.js";import{a as m}from"./index-R-lXtGyY.js";const Et={class:"tw-max-w-screen-2xl tw-mx-auto tw-font-sans"},Lt={class:"tw-bg-white tw-p-5 tw-rounded-lg tw-shadow-md tw-mb-5"},Nt={class:"tw-text-center tw-mb-4"},Rt={class:"tw-text-xl tw-font-bold tw-text-indigo-600"},Bt={class:"tw-flex tw-flex-wrap tw-gap-2 tw-justify-center"},zt=["disabled"],It={key:0,class:"tw-flex tw-justify-center tw-items-center tw-py-10"},Vt={key:1,class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 md:tw-grid-cols-3 lg:tw-grid-cols-5 tw-gap-3 tw-pb-4"},Ft={class:"tw-text-base tw-font-bold"},Jt={class:"tw-text-sm tw-opacity-90"},Kt={class:"tw-flex-grow tw-space-y-1"},Ht={key:0,class:"tw-flex-grow tw-flex tw-items-center tw-justify-center tw-text-center tw-text-gray-500 tw-font-bold tw-p-5 tw-bg-gray-200 tw-rounded-md"},Pt={class:"tw-w-12 tw-text-right tw-text-sm tw-font-medium tw-text-gray-600"},Zt=["onDragover","onDragleave","onDrop"],Gt=["onClick","title"],qt={class:"tw-truncate tw-flex-1 tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-block"},Qt={key:0,class:"tw-flex tw-items-center tw-flex-shrink-0 tw-ml-2"},Xt=["title","onClick"],Yt=["onClick"],Dt={key:0,class:"tw-absolute tw-top-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-48 tw-overflow-y-auto tw-z-10 tw-shadow-lg tw-mt-1"},te={key:0},ee=["onClick"],se=["onClick"],ne=["onClick"],re={key:1},oe=["onClick"],le={key:0,class:"tw-mt-4 tw-pt-3 tw-border-t"},ie={class:"tw-space-y-1 tw-text-sm"},ae={key:0,class:"tw-text-gray-400 tw-text-xs tw-text-center tw-py-2"},we=["onDragstart"],ue=["onClick"],de={class:"tw-relative tw-mt-2"},ce=["onClick"],pe={key:0,class:"tw-absolute tw-bottom-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-48 tw-overflow-y-auto tw-z-10 tw-shadow-lg tw-mb-1"},fe={key:0},ve=["onClick"],ge={key:1},_e=["onClick"],me=["onClick","disabled"],ye={key:3,class:"tw-fixed tw-inset-0 tw-bg-gray-600 tw-bg-opacity-50 tw-overflow-y-auto tw-h-full tw-w-full tw-z-50 tw-flex tw-justify-center tw-items-center"},he={class:"tw-relative tw-p-5 tw-border tw-w-96 tw-shadow-lg tw-rounded-md tw-bg-white"},xe={class:"tw-mt-4 tw-flex tw-justify-end tw-space-x-2"},be=["disabled"],ke={key:0},$e={key:1},Ce={__name:"App",setup(Se){const O=c([]),L=c({}),u=c({}),y=c(0),x=c(null),h=c(1),N=c([]),k=c(null),T=c({show:!1,message:"",type:"info"}),M=c(!1),j=c({}),R=c(!1),B=c({}),b=c(null),U=c(null),F=c(!1),W=c(""),z=c(!1),J=c(!0),P=c(null),Z=A(()=>y.value===0?"æœ¬é€±é ç´„":y.value===1?"ä¸‹é€±é ç´„":y.value===-1?"ä¸Šé€±é ç´„":y.value>1?`æœªä¾†ç¬¬ ${y.value} é€±`:`éå»ç¬¬ ${Math.abs(y.value)} é€±`),ot=A(()=>{const t=new Map;return O.value.forEach(e=>{e&&e.id!==void 0&&e.id!==null&&t.set(e.id.toString(),e)}),t}),G=A(()=>{const t="ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦#";return Object.keys(L.value).sort((e,s)=>e==="#"?1:s==="#"?-1:t.indexOf(e)-t.indexOf(s))}),K=A(()=>{for(const t in u.value)if(I(u.value[t]))return!0;return!1}),lt=A(()=>M.value?"ç™¼é€ä¸­...":R.value?"æœ¬é€±æé†’å·²ç™¼é€":K.value?"ç™¼é€æ•´é€±æé†’":"æœ¬é€±ç„¡å¯æé†’å°è±¡"),it=A(()=>M.value?"tw-bg-gray-400 tw-text-white":K.value?R.value?"tw-bg-blue-600 tw-text-white":"tw-bg-white tw-text-gray-700 tw-border tw-border-gray-300 hover:tw-bg-gray-50":"tw-bg-red-200 tw-text-red-700");function at(t){return U.value===t}function I(t){if(!t||t.is_closed||!t.appointments)return!1;for(const e in t.appointments){const s=t.appointments[e];if(s.user_id){const n=ot.value.get(s.user_id.toString());if(n&&n.line_user_id&&n.line_user_id.startsWith("U"))return!0}}return!1}function wt(t){const e=t.date_info.date;return j.value[e]?"ç™¼é€ä¸­...":B.value[e]?"æœ¬æ—¥æé†’å·²ç™¼é€":I(t)?`ğŸ“¤ ç™¼é€ ${t.date_info.day_name} æé†’`:"æœ¬æ—¥ç„¡å¯æé†’å°è±¡"}function ut(t){const e=t.date_info.date;return j.value[e]?"tw-bg-gray-400 tw-text-white":I(t)?B.value[e]?"tw-bg-blue-600 tw-text-white":"tw-bg-white tw-text-gray-700 tw-border tw-border-gray-300 hover:tw-bg-gray-50":"tw-bg-red-200 tw-text-red-700"}const dt=t=>{if(t.last_reply)return t.last_reply.confirmed?"ğŸŸ¢":"ğŸŸ¡";switch(t.reply_status){case"å·²ç¢ºèª":return"ğŸŸ¢";case"å·²å›è¦†":return"ğŸŸ¡";case"æœªå›è¦†":return"ğŸ”´";default:return"âšªï¸"}},ct=t=>{let e="æœªçŸ¥",s="ç„¡";if(t.last_reply){const n=t.last_reply.type==="image"?"åœ–ç‰‡":"æ–‡å­—";e=t.last_reply.confirmed?"å·²ç¢ºèª":`æœ‰æ–°çš„${n}å›è¦†`,s=t.last_reply.content||"N/A"}else t.reply_status&&(e=t.reply_status,s=t.last_reply||"ç„¡");return`é»æ“Šä»¥è®Šæ›´ç‹€æ…‹
ç›®å‰: ${e}
å…§å®¹: ${s}`};function d(t,e="success",s=3e3){T.value={show:!0,message:t,type:e},setTimeout(()=>{T.value.show=!1},s)}function q(t){return t.reduce((s,n)=>{const r=n.zhuyin?n.zhuyin[0]:"#";return s[r]||(s[r]=[]),s[r].push(n),s},{})}async function Q(){J.value=!0;try{const t=await m.get(`/api/admin/get_week_appointments?offset=${y.value}`);O.value=t.data.users||[],L.value=q(O.value),u.value=t.data.week_schedule||{},d("âœ… è³‡æ–™å·²æ›´æ–°","success")}catch(t){d("âŒ æ’ç¨‹è¼‰å…¥å¤±æ•—","error"),console.error("Schedule loading error:",t)}finally{J.value=!1}}async function pt(){try{const e=(await m.get(`/api/admin/get_week_appointments?offset=${y.value}`)).data.week_schedule||{};for(const s in u.value)if(e[s]){const n=u.value[s],r=e[s];for(const v in n.appointments)if(r.appointments[v]){const w=n.appointments[v],o=r.appointments[v];(JSON.stringify(w.last_reply)!==JSON.stringify(o.last_reply)||w.reply_status!==o.reply_status)&&(w.last_reply=o.last_reply,w.reply_status=o.reply_status)}}console.log("Polling update complete at",new Date().toLocaleTimeString())}catch(t){console.error("Polling for updates failed:",t)}}async function X(){d("è¼‰å…¥ä¸­...","info"),await Q()}function Y(t){y.value+=t,R.value=!1,B.value={},Q()}function E(){x.value=null,h.value=1,N.value=[]}function ft(t,e,s){const n=`${t}-${e}`;if(x.value===n)E(),k.value=null;else if(x.value=n,h.value=1,k.value=null,s>0){const r=u.value[t];if(r&&r.appointments){const w=Object.keys(r.appointments)[s-1],o=r.appointments[w];o&&o.user_id&&(k.value={id:o.user_id,name:o.user_name})}}}function vt(t){const e=`waiting-${t}`;x.value===e?E():(x.value=e,h.value=1)}function D(t){N.value=L.value[t]||[],h.value=2}async function V(t,e,s,n,r=null){const v=u.value[t]?.appointments[e]?.user_id,w=u.value[t]?.appointments[e]?.user_name;if(E(),u.value[t]&&u.value[t].appointments[e]){const o=u.value[t].appointments[e];o.user_id=s,o.user_name=n,!v&&s?(o.id=Date.now(),o.reply_status="æœªå›è¦†"):v&&!s&&(o.id=null,o.reply_status="æœªå›è¦†",o.last_reply="")}d("å„²å­˜ä¸­...","info");try{const o=await m.post("/api/admin/save_appointment",{date:t,time:e,user_id:s,user_name:n,waiting_list_item_id:typeof r=="number"?r:null});if(o.data.status==="success"){d("âœ… é ç´„å·²å„²å­˜","success");const g=o.data.appointment;if(g&&u.value[t]&&u.value[t].appointments[e]){const H=u.value[t].appointments[e];H.id=g.id,H.reply_status=g.reply_status,H.last_reply=g.last_reply}}else throw new Error(o.data.message||"å„²å­˜å¤±æ•—")}catch(o){d(`âŒ å„²å­˜å¤±æ•—: ${o.message||"æœªçŸ¥éŒ¯èª¤"}`,"error"),u.value[t]&&u.value[t].appointments[e]&&(u.value[t].appointments[e].user_id=v,u.value[t].appointments[e].user_name=w)}}async function gt(t,e){E(),d("æ–°å¢å‚™å–ä¸­...","info");try{const s=await m.post("/api/admin/waiting_list",{date:t,user_id:e.id,user_name:e.name});if(s.data.status==="success")u.value[t].waiting_list||(u.value[t].waiting_list=[]),u.value[t].waiting_list.push(s.data.item),d("âœ… å·²æ–°å¢è‡³å‚™å–","success");else throw new Error(s.data.message||"æ–°å¢å¤±æ•—")}catch(s){d(`âŒ æ–°å¢å‚™å–å¤±æ•—: ${s.message}`,"error")}}async function _t(t,e){if(confirm("ç¢ºå®šè¦å¾å‚™å–åå–®ä¸­ç§»é™¤å—ï¼Ÿ"))try{await m.delete(`/api/admin/waiting_list/${t}`);const s=u.value[e];s&&s.waiting_list&&(s.waiting_list=s.waiting_list.filter(n=>n.id!==t)),d("âœ… å·²å¾å‚™å–ç§»é™¤","success")}catch{d("âŒ ç§»é™¤å¤±æ•—","error")}}function tt(t,e,s){x.value.startsWith("waiting-")?gt(t,s):V(t,e,s.id,s.name)}function mt(t,e){b.value=e,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",JSON.stringify(e))}function yt(t,e,s){b.value&&!s.user_id&&(U.value=`${t}-${e}`)}function ht(t,e){U.value===`${t}-${e}`&&(U.value=null)}async function xt(t,e){b.value&&U.value===`${t}-${e}`&&(await V(t,e,b.value.user_id,b.value.user_name,b.value.id),u.value[t].waiting_list=u.value[t].waiting_list.filter(s=>s.id!==b.value.id)),b.value=null,U.value=null}async function bt(){const t=Object.keys(u.value).sort();let e="";if(t.length>0){const s=u.value[t[0]].date_info.display,n=u.value[t[t.length-1]].date_info.display;e=` (${s} ~ ${n})`}if(confirm(`ç¢ºå®šè¦ç™¼é€ã€Œ${Z.value}ã€${e} çš„é ç´„æé†’å—ï¼Ÿ`)){M.value=!0;try{const n=(await m.post("/api/admin/send_appointment_reminders",{type:"week",offset:y.value})).data;d(`âœ… å·²ç™¼é€ ${n.sent_count} å‰‡æé†’${n.failed_count>0?`ï¼Œ${n.failed_count} å‰‡å¤±æ•—`:""}`),n.sent_count>0&&(R.value=!0)}catch{d("âŒ ç™¼é€å¤±æ•—","error")}finally{M.value=!1}}}async function kt(t,e){if(confirm(`ç¢ºå®šè¦ç™¼é€ ${e} çš„é ç´„æé†’å—ï¼Ÿ`)){j.value[t]=!0;try{const n=(await m.post("/api/admin/send_appointment_reminders",{type:"day",date:t})).data;n.sent_count>0&&(B.value[t]=!0),d(`âœ… å·²ç™¼é€ ${e} çš„ ${n.sent_count} å‰‡æé†’${n.failed_count>0?`ï¼Œ${n.failed_count} å‰‡å¤±æ•—`:""}`)}catch{d("âŒ ç™¼é€å¤±æ•—","error")}finally{j.value[t]=!1}}}async function $t(t,e,s){const n=Object.values(u.value[e].appointments),r=n.filter(o=>o.id!==t.id&&o.user_id===t.user_id);if(r.length>0&&(t.reply_status==="æœªå›è¦†"||t.reply_status==="å·²å›è¦†")&&confirm(`ã€Œ${t.user_name}ã€åœ¨ ${e} é‚„æœ‰å…¶ä»– ${r.length} å€‹é ç´„ï¼Œè¦å°‡ç•¶æ—¥æ‰€æœ‰é ç´„ä¸€ä½µæ¨™ç¤ºç‚ºã€Œå·²ç¢ºèªã€å—ï¼Ÿ`)){d("æ‰¹æ¬¡ç¢ºèªä¸­...","info");try{const o=await m.post("/api/admin/confirm_user_day_replies",{user_id:t.user_id,date:e});if(o.data.status==="success")n.forEach(g=>{g.user_id===t.user_id&&(g.reply_status="å·²ç¢ºèª")}),d("âœ… å·²æ‰¹æ¬¡ç¢ºèªå®Œç•¢","success");else throw new Error(o.data.message||"æ‰¹æ¬¡ç¢ºèªå¤±æ•—")}catch(o){d(`âŒ æ‰¹æ¬¡ç¢ºèªå¤±æ•—: ${o.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}return}const v=t.reply_status;let w;v==="æœªå›è¦†"||v==="å·²å›è¦†"?w="å·²ç¢ºèª":w="æœªå›è¦†",d("æ›´æ–°ç‹€æ…‹ä¸­...","info");try{const o=await m.put(`/api/admin/appointments/${t.id}/reply_status`,{status:w});if(o.data.status==="success"){const g=u.value[e]?.appointments[s];g&&(g.reply_status=w,w==="å·²ç¢ºèª"&&g.last_reply?g.last_reply.confirmed=!0:w==="æœªå›è¦†"&&(g.last_reply=null)),d(`âœ… ç‹€æ…‹å·²æ›´æ–°ç‚ºã€Œ${w}ã€`,"success")}else throw new Error(o.data.message||"æ›´æ–°å¤±æ•—")}catch(o){d(`âŒ æ›´æ–°ç‹€æ…‹å¤±æ•—: ${o.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}}async function Ct(t,e,s){d("ç¢ºèªä¸­...","info");try{const n=await m.post(`/api/admin/appointments/${t}/confirm_reply`);if(n.data.status==="success"){const r=u.value[e]?.appointments[s];r&&(r.reply_status="å·²ç¢ºèª",r.last_reply&&typeof r.last_reply=="object"&&(r.last_reply.confirmed=!0)),d("âœ… å·²ç¢ºèªå›è¦†","success")}else throw new Error(n.data.message||"ç¢ºèªå¤±æ•—")}catch(n){d(`âŒ ç¢ºèªå¤±æ•—: ${n.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}}function St(){F.value=!0,W.value=""}function et(){F.value=!1}async function st(){const t=W.value.trim();if(!t){d("ç”¨æˆ¶å§“åä¸èƒ½ç‚ºç©ºã€‚","error");return}z.value=!0;try{const e=await m.post("/api/admin/users/add_manual",{name:t});if(e.data.status==="success"){const s=e.data.user;O.value.push(s),L.value=q(O.value),d(`âœ… è‡¨æ™‚ç”¨æˆ¶ "${s.name}" å·²æ–°å¢ã€‚`,"success"),et()}else throw new Error(e.data.message||"æ–°å¢å¤±æ•—")}catch(e){d(`âŒ æ–°å¢è‡¨æ™‚ç”¨æˆ¶å¤±æ•—: ${e.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}finally{z.value=!1}}const nt=t=>{t.target.closest(".tw-relative")||E()};return Ut(()=>{X(),P.value=setInterval(pt,15e3),document.addEventListener("click",nt)}),At(()=>{clearInterval(P.value),document.removeEventListener("click",nt)}),(t,e)=>(a(),i("div",Et,[l("div",Lt,[l("div",Nt,[l("h2",Rt,p(Z.value),1)]),l("div",Bt,[l("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:e[0]||(e[0]=s=>Y(-1))},"â¬…ï¸ ä¸Šä¸€é€±"),l("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:e[1]||(e[1]=s=>Y(1))},"ä¸‹ä¸€é€± â¡ï¸"),l("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:X},"ğŸ”„ é‡æ–°è¼‰å…¥"),l("button",{class:$(["tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition disabled:tw-cursor-not-allowed",it.value]),onClick:bt,disabled:M.value||!K.value},"ğŸ“¨ "+p(lt.value),11,zt),l("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-green-600 tw-text-white hover:tw-bg-green-700",onClick:St},"â• æ–°å¢è‡¨æ™‚ç”¨æˆ¶")]),e[5]||(e[5]=Ot('<div class="tw-text-center tw-mt-3 tw-text-xs tw-text-gray-500 tw-space-y-1"><div>æé†’æŒ‰éˆ•ï¼š<span class="tw-font-semibold tw-text-gray-700">ç™½è‰²</span>=å¯ç™¼é€, <span class="tw-font-semibold tw-text-blue-600">è—è‰²</span>=å·²ç™¼é€, <span class="tw-font-semibold tw-text-red-600">ç´…è‰²</span>=ç„¡å¯æé†’å°è±¡</div><div>é ç´„æ™‚æ®µï¼š<span class="tw-px-1 tw-py-0.5 tw-rounded tw-bg-red-200 tw-text-red-800 tw-font-semibold">ç´…è‰²åº•</span> = è‡¨æ™‚ç”¨æˆ¶ (ç„¡æ³•ç™¼é€LINEæé†’)</div><div class="tw-pt-1">ç‹€æ…‹ç‡ˆè™Ÿèªªæ˜ï¼š<span class="tw-font-mono">ğŸ”´</span>=æœªå›è¦†, <span class="tw-font-mono">ğŸŸ¡</span>=å·²å›è¦†(ç³»çµ±è‡ªå‹•æ¨™è¨˜), <span class="tw-font-mono">ğŸŸ¢</span>=å·²ç¢ºèª(æ‰‹å‹•æ¨™è¨˜)ã€‚é»æ“Šç‡ˆè™Ÿå¯æ‰‹å‹•åˆ‡æ›ç‹€æ…‹ã€‚</div></div>',1))]),J.value?(a(),i("div",It,[...e[6]||(e[6]=[l("div",{class:"tw-animate-spin tw-rounded-full tw-h-12 tw-w-12 tw-border-b-2 tw-border-indigo-500"},null,-1),l("p",{class:"tw-ml-4 tw-text-gray-600"},"è¼‰å…¥ä¸­...",-1)])])):(a(),i("div",Vt,[(a(!0),i(C,null,S(u.value,s=>(a(),i("div",{key:s.date_info.date,class:$(["tw-rounded-lg tw-p-3 tw-shadow-lg tw-flex tw-flex-col tw-gap-y-3",s.is_closed?"tw-bg-gray-100":"tw-bg-white"])},[l("div",{class:$(["tw-text-white tw-p-2.5 tw-rounded-md tw-text-center",s.is_closed?"tw-bg-gray-400":"tw-bg-gradient-to-r tw-from-indigo-600 tw-to-purple-700"])},[l("h3",Ft,p(s.date_info.day_name),1),l("p",Jt,p(s.date_info.display),1)],2),l("div",Kt,[s.is_closed?(a(),i("div",Ht,[...e[7]||(e[7]=[rt(" ğŸ˜´",-1),l("br",null,null,-1),rt("æœ¬æ—¥ä¼‘è¨º ",-1)])])):(a(!0),i(C,{key:1},S(s.appointments,(n,r,v)=>(a(),i("div",{key:r,class:"tw-flex tw-items-center tw-gap-2"},[l("span",Pt,p(r),1),l("div",{class:$(["tw-relative tw-flex-1",{"tw-bg-green-100 tw-border-green-400":at(`${s.date_info.date}-${r}`)}]),onDragover:_(w=>yt(s.date_info.date,r,n),["prevent"]),onDragleave:w=>ht(s.date_info.date,r),onDrop:_(w=>xt(s.date_info.date,r),["prevent"])},[l("div",{class:$(["tw-w-full tw-p-1.5 tw-border tw-text-sm tw-rounded tw-cursor-pointer tw-flex tw-justify-between tw-items-center tw-min-w-0",{"tw-text-gray-500":!n.user_id,"tw-bg-red-200 tw-border-red-400 tw-text-red-800":n.user_id?.startsWith("manual_"),"tw-bg-white tw-border-gray-300 tw-text-gray-800":!n.user_id?.startsWith("manual_"),"tw-font-semibold":n.user_id&&n.user_id.startsWith("manual_")}]),onClick:w=>ft(s.date_info.date,r,v),title:n.user_name||"æœªé ç´„"},[l("span",qt,p(n.user_name||"-- æœªé ç´„ --"),1),n.id?(a(),i("div",Qt,[l("span",{class:"tw-text-xs tw-font-mono tw-cursor-pointer",title:ct(n),onClick:_(w=>$t(n,s.date_info.date,r),["stop"])},p(dt(n)),9,Xt),n.reply_status==="å·²å›è¦†"?(a(),i("button",{key:0,onClick:_(w=>Ct(n.id,s.date_info.date,r),["stop"]),title:"ç¢ºèªå›è¦†",class:"tw-ml-1 tw-px-1.5 tw-py-0.5 tw-text-xs tw-bg-green-500 tw-text-white tw-rounded hover:tw-bg-green-600"}," âœ… ",8,Yt)):f("",!0)])):f("",!0),e[8]||(e[8]=l("span",{class:"tw-ml-2 tw-text-gray-400 tw-text-xs"},"â–¼",-1))],10,Gt),x.value===`${s.date_info.date}-${r}`?(a(),i("div",Dt,[h.value===1?(a(),i("div",te,[k.value?(a(),i("div",{key:0,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-blue-600 tw-font-bold tw-border-b hover:tw-bg-gray-100",onClick:_(w=>V(s.date_info.date,r,k.value.id,k.value.name),["stop"])}," â¡ï¸ åŒä¸Š ("+p(k.value.name)+") ",9,ee)):f("",!0),l("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:_(w=>V(s.date_info.date,r,"","-- æœªé ç´„ --"),["stop"])},"-- æœªé ç´„ --",8,se),(a(!0),i(C,null,S(G.value,w=>(a(),i("div",{key:w,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:_(o=>D(w),["stop"])},p(w),9,ne))),128))])):f("",!0),h.value===2?(a(),i("div",re,[l("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[2]||(e[2]=_(w=>h.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),(a(!0),i(C,null,S(N.value,w=>(a(),i("div",{key:w.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:_(o=>tt(s.date_info.date,r,w),["stop"])},p(w.name),9,oe))),128))])):f("",!0)])):f("",!0)],42,Zt)]))),128))]),s.is_closed?f("",!0):(a(),i("div",le,[e[9]||(e[9]=l("h4",{class:"tw-text-sm tw-font-semibold tw-text-gray-500 tw-mb-2"},"å‚™å–åå–®",-1)),l("div",ie,[!s.waiting_list||s.waiting_list.length===0?(a(),i("div",ae,"å°šç„¡å‚™å–")):f("",!0),(a(!0),i(C,null,S(s.waiting_list,n=>(a(),i("div",{key:n.id,class:"tw-flex tw-items-center tw-justify-between tw-p-1.5 tw-bg-yellow-50 tw-border tw-border-yellow-200 tw-rounded tw-cursor-grab",draggable:"true",onDragstart:r=>mt(r,n)},[l("span",null,p(n.user_name),1),l("button",{onClick:r=>_t(n.id,s.date_info.date),class:"tw-text-red-500 hover:tw-text-red-700 tw-text-xs"},"âœ•",8,ue)],40,we))),128))]),l("div",de,[l("button",{onClick:n=>vt(s.date_info.date),class:"tw-w-full tw-text-xs tw-text-center tw-py-1.5 tw-bg-gray-100 hover:tw-bg-gray-200 tw-rounded-md tw-text-gray-600"},"+ æ–°å¢å‚™å–",8,ce),x.value===`waiting-${s.date_info.date}`?(a(),i("div",pe,[h.value===1?(a(),i("div",fe,[(a(!0),i(C,null,S(G.value,n=>(a(),i("div",{key:n,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:_(r=>D(n),["stop"])},p(n),9,ve))),128))])):f("",!0),h.value===2?(a(),i("div",ge,[l("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[3]||(e[3]=_(n=>h.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),(a(!0),i(C,null,S(N.value,n=>(a(),i("div",{key:n.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:_(r=>tt(s.date_info.date,null,n),["stop"])},p(n.name),9,_e))),128))])):f("",!0)])):f("",!0)])])),s.is_closed?f("",!0):(a(),i("button",{key:1,class:$(["tw-mt-2 tw-w-full tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition disabled:tw-cursor-not-allowed",ut(s)]),onClick:n=>kt(s.date_info.date,s.date_info.day_name),disabled:j.value[s.date_info.date]||!I(s)},p(wt(s)),11,me))],2))),128))])),T.value.show?(a(),i("div",{key:2,class:$(["tw-fixed tw-top-5 tw-right-5 tw-px-5 tw-py-4 tw-rounded-md tw-shadow-lg tw-text-white",T.value.type==="success"?"tw-bg-gray-800":"tw-bg-red-700"])},p(T.value.message),3)):f("",!0),F.value?(a(),i("div",ye,[l("div",he,[e[10]||(e[10]=l("h3",{class:"tw-text-lg tw-font-bold tw-mb-4"},"æ–°å¢è‡¨æ™‚ç”¨æˆ¶",-1)),Tt(l("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>W.value=s),placeholder:"è«‹è¼¸å…¥ç”¨æˆ¶å§“å",class:"tw-mt-1 tw-block tw-w-full tw-px-3 tw-py-2 tw-border tw-border-gray-300 tw-rounded-md tw-shadow-sm focus:tw-outline-none focus:tw-ring-indigo-500 focus:tw-border-indigo-500 sm:tw-text-sm",onKeyup:jt(st,["enter"])},null,544),[[Mt,W.value]]),l("div",xe,[l("button",{onClick:et,class:"tw-px-4 tw-py-2 tw-bg-gray-300 tw-text-gray-800 tw-rounded-md hover:tw-bg-gray-400"}," å–æ¶ˆ "),l("button",{onClick:st,disabled:z.value||!W.value.trim(),class:"tw-px-4 tw-py-2 tw-bg-indigo-600 tw-text-white tw-rounded-md hover:tw-bg-indigo-700 disabled:tw-opacity-50 disabled:tw-cursor-not-allowed"},[z.value?(a(),i("span",ke,"æ–°å¢ä¸­...")):(a(),i("span",$e,"ç¢ºå®šæ–°å¢"))],8,be)])])])):f("",!0)]))}};Wt(Ce).mount("#app");
