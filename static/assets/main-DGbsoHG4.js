import{r as c,c as M,o as $t,a as Ct,b as r,d as i,e as o,f as v,g as St,t as p,n as $,F as C,h as S,i as nt,w as f,j as Ut,v as Mt,k as Ot,l as jt}from"./runtime-dom.esm-bundler-jAXvPR8n.js";import{a as _}from"./index-R-lXtGyY.js";const At={class:"tw-max-w-screen-2xl tw-mx-auto tw-font-sans"},Et={class:"tw-bg-white tw-p-5 tw-rounded-lg tw-shadow-md tw-mb-5"},Wt={class:"tw-text-center tw-mb-4"},Tt={class:"tw-text-xl tw-font-bold tw-text-indigo-600"},Rt={class:"tw-flex tw-flex-wrap tw-gap-2 tw-justify-center"},Bt=["disabled"],Lt={key:0,class:"tw-flex tw-justify-center tw-items-center tw-py-10"},zt={key:1,class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 md:tw-grid-cols-3 lg:tw-grid-cols-5 tw-gap-3 tw-pb-4"},Nt={class:"tw-text-base tw-font-bold"},Vt={class:"tw-text-sm tw-opacity-90"},Ft={class:"tw-flex-grow tw-space-y-1"},Kt={key:0,class:"tw-flex-grow tw-flex tw-items-center tw-justify-center tw-text-center tw-text-gray-500 tw-font-bold tw-p-5 tw-bg-gray-200 tw-rounded-md"},Ht={class:"tw-w-12 tw-text-right tw-text-sm tw-font-medium tw-text-gray-600"},It=["onDragover","onDragleave","onDrop"],Zt=["onClick","title"],Gt={class:"tw-truncate tw-flex-1 tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-block"},Jt={key:0,class:"tw-flex tw-items-center tw-flex-shrink-0 tw-ml-2"},qt=["title","onClick"],Pt=["onClick"],Qt={key:0,class:"tw-absolute tw-top-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-48 tw-overflow-y-auto tw-z-10 tw-shadow-lg tw-mt-1"},Xt={key:0},Yt=["onClick"],Dt=["onClick"],te=["onClick"],ee={key:1},se=["onClick"],ne={key:0,class:"tw-mt-4 tw-pt-3 tw-border-t"},oe={class:"tw-space-y-1 tw-text-sm"},re={key:0,class:"tw-text-gray-400 tw-text-xs tw-text-center tw-py-2"},ie=["onDragstart"],ae=["onClick"],le={class:"tw-relative tw-mt-2"},we=["onClick"],ue={key:0,class:"tw-absolute tw-bottom-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-48 tw-overflow-y-auto tw-z-10 tw-shadow-lg tw-mb-1"},de={key:0},ce=["onClick"],pe={key:1},ve=["onClick"],fe=["onClick","disabled"],ge={key:3,class:"tw-fixed tw-inset-0 tw-bg-gray-600 tw-bg-opacity-50 tw-overflow-y-auto tw-h-full tw-w-full tw-z-50 tw-flex tw-justify-center tw-items-center"},_e={class:"tw-relative tw-p-5 tw-border tw-w-96 tw-shadow-lg tw-rounded-md tw-bg-white"},me={class:"tw-mt-4 tw-flex tw-justify-end tw-space-x-2"},ye=["disabled"],he={key:0},xe={key:1},be={__name:"App",setup(ke){const O=c([]),R=c({}),a=c({}),m=c(0),h=c(null),g=c(1),B=c([]),b=c(null),j=c({show:!1,message:"",type:"info"}),A=c(!1),E=c({}),L=c(!1),z=c({}),x=c(null),U=c(null),K=c(!1),W=c(""),N=c(!1),H=c(!0),G=M(()=>m.value===0?"æœ¬é€±é ç´„":m.value===1?"ä¸‹é€±é ç´„":m.value===-1?"ä¸Šé€±é ç´„":m.value>1?`æœªä¾†ç¬¬ ${m.value} é€±`:`éå»ç¬¬ ${Math.abs(m.value)} é€±`),ot=M(()=>{const t=new Map;return O.value.forEach(e=>{e&&e.id!==void 0&&e.id!==null&&t.set(e.id.toString(),e)}),t}),J=M(()=>{const t="ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦#";return Object.keys(R.value).sort((e,s)=>e==="#"?1:s==="#"?-1:t.indexOf(e)-t.indexOf(s))}),I=M(()=>{for(const t in a.value)if(V(a.value[t]))return!0;return!1}),rt=M(()=>A.value?"ç™¼é€ä¸­...":L.value?"æœ¬é€±æé†’å·²ç™¼é€":I.value?"ç™¼é€æ•´é€±æé†’":"æœ¬é€±ç„¡å¯æé†’å°è±¡"),it=M(()=>A.value?"tw-bg-gray-400 tw-text-white":I.value?L.value?"tw-bg-blue-600 tw-text-white":"tw-bg-white tw-text-gray-700 tw-border tw-border-gray-300 hover:tw-bg-gray-50":"tw-bg-red-200 tw-text-red-700");function at(t){return U.value===t}function V(t){if(!t||t.is_closed||!t.appointments)return!1;for(const e in t.appointments){const s=t.appointments[e];if(s.user_id){const n=ot.value.get(s.user_id.toString());if(n&&n.line_user_id&&n.line_user_id.startsWith("U"))return!0}}return!1}function lt(t){const e=t.date_info.date;return E.value[e]?"ç™¼é€ä¸­...":z.value[e]?"æœ¬æ—¥æé†’å·²ç™¼é€":V(t)?`ğŸ“¤ ç™¼é€ ${t.date_info.day_name} æé†’`:"æœ¬æ—¥ç„¡å¯æé†’å°è±¡"}function wt(t){const e=t.date_info.date;return E.value[e]?"tw-bg-gray-400 tw-text-white":V(t)?z.value[e]?"tw-bg-blue-600 tw-text-white":"tw-bg-white tw-text-gray-700 tw-border tw-border-gray-300 hover:tw-bg-gray-50":"tw-bg-red-200 tw-text-red-700"}const ut=t=>{switch(t){case"æœªå›è¦†":return"ğŸ”´";case"å·²å›è¦†":return"ğŸŸ¡";case"å·²ç¢ºèª":return"ğŸŸ¢";default:return"âšªï¸"}};function u(t,e="success",s=3e3){j.value={show:!0,message:t,type:e},setTimeout(()=>{j.value.show=!1},s)}function q(t){return t.reduce((s,n)=>{const l=n.zhuyin?n.zhuyin[0]:"#";return s[l]||(s[l]=[]),s[l].push(n),s},{})}async function P(){H.value=!0;try{const t=await _.get(`/api/admin/get_week_appointments?offset=${m.value}`);O.value=t.data.users||[],R.value=q(O.value),a.value=t.data.week_schedule||{},u("âœ… è³‡æ–™å·²æ›´æ–°","success")}catch(t){u("âŒ æ’ç¨‹è¼‰å…¥å¤±æ•—","error"),console.error("Schedule loading error:",t)}finally{H.value=!1}}async function Q(){u("è¼‰å…¥ä¸­...","info"),await P()}function X(t){m.value+=t,L.value=!1,z.value={},P()}function T(){h.value=null,g.value=1,B.value=[]}function dt(t,e,s){const n=`${t}-${e}`;if(h.value===n)T(),b.value=null;else if(h.value=n,g.value=1,b.value=null,s>0){const l=a.value[t];if(l&&l.appointments){const d=Object.keys(l.appointments)[s-1],w=l.appointments[d];w&&w.user_id&&(b.value={id:w.user_id,name:w.user_name})}}}function ct(t){const e=`waiting-${t}`;h.value===e?T():(h.value=e,g.value=1)}function Y(t){B.value=R.value[t]||[],g.value=2}async function F(t,e,s,n,l=null){const y=a.value[t]?.appointments[e]?.user_id,d=a.value[t]?.appointments[e]?.user_name;if(T(),a.value[t]&&a.value[t].appointments[e]){const w=a.value[t].appointments[e];w.user_id=s,w.user_name=n,!y&&s?(w.id=Date.now(),w.reply_status="æœªå›è¦†"):y&&!s&&(w.id=null,w.reply_status="æœªå›è¦†",w.last_reply="")}u("å„²å­˜ä¸­...","info");try{const w=await _.post("/api/admin/save_appointment",{date:t,time:e,user_id:s,user_name:n,waiting_list_item_id:typeof l=="number"?l:null});if(w.data.status==="success"){u("âœ… é ç´„å·²å„²å­˜","success");const k=w.data.appointment;if(k&&a.value[t]&&a.value[t].appointments[e]){const Z=a.value[t].appointments[e];Z.id=k.id,Z.reply_status=k.reply_status,Z.last_reply=k.last_reply}}else throw new Error(w.data.message||"å„²å­˜å¤±æ•—")}catch(w){u(`âŒ å„²å­˜å¤±æ•—: ${w.message||"æœªçŸ¥éŒ¯èª¤"}`,"error"),a.value[t]&&a.value[t].appointments[e]&&(a.value[t].appointments[e].user_id=y,a.value[t].appointments[e].user_name=d)}}async function pt(t,e){T(),u("æ–°å¢å‚™å–ä¸­...","info");try{const s=await _.post("/api/admin/waiting_list",{date:t,user_id:e.id,user_name:e.name});if(s.data.status==="success")a.value[t].waiting_list||(a.value[t].waiting_list=[]),a.value[t].waiting_list.push(s.data.item),u("âœ… å·²æ–°å¢è‡³å‚™å–","success");else throw new Error(s.data.message||"æ–°å¢å¤±æ•—")}catch(s){u(`âŒ æ–°å¢å‚™å–å¤±æ•—: ${s.message}`,"error")}}async function vt(t,e){if(confirm("ç¢ºå®šè¦å¾å‚™å–åå–®ä¸­ç§»é™¤å—ï¼Ÿ"))try{await _.delete(`/api/admin/waiting_list/${t}`);const s=a.value[e];s&&s.waiting_list&&(s.waiting_list=s.waiting_list.filter(n=>n.id!==t)),u("âœ… å·²å¾å‚™å–ç§»é™¤","success")}catch{u("âŒ ç§»é™¤å¤±æ•—","error")}}function D(t,e,s){h.value.startsWith("waiting-")?pt(t,s):F(t,e,s.id,s.name)}function ft(t,e){x.value=e,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",JSON.stringify(e))}function gt(t,e,s){x.value&&!s.user_id&&(U.value=`${t}-${e}`)}function _t(t,e){U.value===`${t}-${e}`&&(U.value=null)}async function mt(t,e){x.value&&U.value===`${t}-${e}`&&(await F(t,e,x.value.user_id,x.value.user_name,x.value.id),a.value[t].waiting_list=a.value[t].waiting_list.filter(s=>s.id!==x.value.id)),x.value=null,U.value=null}async function yt(){const t=Object.keys(a.value).sort();let e="";if(t.length>0){const s=a.value[t[0]].date_info.display,n=a.value[t[t.length-1]].date_info.display;e=` (${s} ~ ${n})`}if(confirm(`ç¢ºå®šè¦ç™¼é€ã€Œ${G.value}ã€${e} çš„é ç´„æé†’å—ï¼Ÿ`)){A.value=!0;try{const n=(await _.post("/api/admin/send_appointment_reminders",{type:"week",offset:m.value})).data;u(`âœ… å·²ç™¼é€ ${n.sent_count} å‰‡æé†’${n.failed_count>0?`ï¼Œ${n.failed_count} å‰‡å¤±æ•—`:""}`),n.sent_count>0&&(L.value=!0)}catch{u("âŒ ç™¼é€å¤±æ•—","error")}finally{A.value=!1}}}async function ht(t,e){if(confirm(`ç¢ºå®šè¦ç™¼é€ ${e} çš„é ç´„æé†’å—ï¼Ÿ`)){E.value[t]=!0;try{const n=(await _.post("/api/admin/send_appointment_reminders",{type:"day",date:t})).data;n.sent_count>0&&(z.value[t]=!0),u(`âœ… å·²ç™¼é€ ${e} çš„ ${n.sent_count} å‰‡æé†’${n.failed_count>0?`ï¼Œ${n.failed_count} å‰‡å¤±æ•—`:""}`)}catch{u("âŒ ç™¼é€å¤±æ•—","error")}finally{E.value[t]=!1}}}async function xt(t,e,s){const n=Object.values(a.value[e].appointments),l=n.filter(w=>w.id!==t.id&&w.user_id===t.user_id);if(l.length>0&&(t.reply_status==="æœªå›è¦†"||t.reply_status==="å·²å›è¦†")&&confirm(`ã€Œ${t.user_name}ã€åœ¨ ${e} é‚„æœ‰å…¶ä»– ${l.length} å€‹é ç´„ï¼Œè¦å°‡ç•¶æ—¥æ‰€æœ‰é ç´„ä¸€ä½µæ¨™ç¤ºç‚ºã€Œå·²ç¢ºèªã€å—ï¼Ÿ`)){u("æ‰¹æ¬¡ç¢ºèªä¸­...","info");try{const w=await _.post("/api/admin/confirm_user_day_replies",{user_id:t.user_id,date:e});if(w.data.status==="success")n.forEach(k=>{k.user_id===t.user_id&&(k.reply_status="å·²ç¢ºèª")}),u("âœ… å·²æ‰¹æ¬¡ç¢ºèªå®Œç•¢","success");else throw new Error(w.data.message||"æ‰¹æ¬¡ç¢ºèªå¤±æ•—")}catch(w){u(`âŒ æ‰¹æ¬¡ç¢ºèªå¤±æ•—: ${w.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}return}const y=t.reply_status;let d;y==="æœªå›è¦†"||y==="å·²å›è¦†"?d="å·²ç¢ºèª":d="æœªå›è¦†",u("æ›´æ–°ç‹€æ…‹ä¸­...","info");try{const w=await _.put(`/api/admin/appointments/${t.id}/reply_status`,{status:d});if(w.data.status==="success")a.value[e]&&a.value[e].appointments[s]&&(a.value[e].appointments[s].reply_status=d),u(`âœ… ç‹€æ…‹å·²æ›´æ–°ç‚ºã€Œ${d}ã€`,"success");else throw new Error(w.data.message||"æ›´æ–°å¤±æ•—")}catch(w){u(`âŒ æ›´æ–°ç‹€æ…‹å¤±æ•—: ${w.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}}async function bt(t,e,s){u("ç¢ºèªä¸­...","info");try{const n=await _.post(`/api/admin/appointments/${t}/confirm_reply`);if(n.data.status==="success")a.value[e]&&a.value[e].appointments[s]&&(a.value[e].appointments[s].reply_status="å·²ç¢ºèª"),u("âœ… å·²ç¢ºèªå›è¦†","success");else throw new Error(n.data.message||"ç¢ºèªå¤±æ•—")}catch(n){u(`âŒ ç¢ºèªå¤±æ•—: ${n.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}}function kt(){K.value=!0,W.value=""}function tt(){K.value=!1}async function et(){const t=W.value.trim();if(!t){u("ç”¨æˆ¶å§“åä¸èƒ½ç‚ºç©ºã€‚","error");return}N.value=!0;try{const e=await _.post("/api/admin/users/add_manual",{name:t});if(e.data.status==="success"){const s=e.data.user;O.value.push(s),R.value=q(O.value),u(`âœ… è‡¨æ™‚ç”¨æˆ¶ "${s.name}" å·²æ–°å¢ã€‚`,"success"),tt()}else throw new Error(e.data.message||"æ–°å¢å¤±æ•—")}catch(e){u(`âŒ æ–°å¢è‡¨æ™‚ç”¨æˆ¶å¤±æ•—: ${e.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}finally{N.value=!1}}const st=t=>{t.target.closest(".tw-relative")||T()};return $t(()=>{Q(),document.addEventListener("click",st)}),Ct(()=>{document.removeEventListener("click",st)}),(t,e)=>(i(),r("div",At,[o("div",Et,[o("div",Wt,[o("h2",Tt,p(G.value),1)]),o("div",Rt,[o("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:e[0]||(e[0]=s=>X(-1))},"â¬…ï¸ ä¸Šä¸€é€±"),o("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:e[1]||(e[1]=s=>X(1))},"ä¸‹ä¸€é€± â¡ï¸"),o("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:Q},"ğŸ”„ é‡æ–°è¼‰å…¥"),o("button",{class:$(["tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition disabled:tw-cursor-not-allowed",it.value]),onClick:yt,disabled:A.value||!I.value},"ğŸ“¨ "+p(rt.value),11,Bt),o("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-green-600 tw-text-white hover:tw-bg-green-700",onClick:kt},"â• æ–°å¢è‡¨æ™‚ç”¨æˆ¶")]),e[5]||(e[5]=St('<div class="tw-text-center tw-mt-3 tw-text-xs tw-text-gray-500 tw-space-y-1"><div>æé†’æŒ‰éˆ•ï¼š<span class="tw-font-semibold tw-text-gray-700">ç™½è‰²</span>=å¯ç™¼é€, <span class="tw-font-semibold tw-text-blue-600">è—è‰²</span>=å·²ç™¼é€, <span class="tw-font-semibold tw-text-red-600">ç´…è‰²</span>=ç„¡å¯æé†’å°è±¡</div><div>é ç´„æ™‚æ®µï¼š<span class="tw-px-1 tw-py-0.5 tw-rounded tw-bg-red-200 tw-text-red-800 tw-font-semibold">ç´…è‰²åº•</span> = è‡¨æ™‚ç”¨æˆ¶ (ç„¡æ³•ç™¼é€LINEæé†’)</div><div class="tw-pt-1">ç‹€æ…‹ç‡ˆè™Ÿèªªæ˜ï¼š<span class="tw-font-mono">ğŸ”´</span>=æœªå›è¦†, <span class="tw-font-mono">ğŸŸ¡</span>=å·²å›è¦†(ç³»çµ±è‡ªå‹•æ¨™è¨˜), <span class="tw-font-mono">ğŸŸ¢</span>=å·²ç¢ºèª(æ‰‹å‹•æ¨™è¨˜)ã€‚é»æ“Šç‡ˆè™Ÿå¯æ‰‹å‹•åˆ‡æ›ç‹€æ…‹ã€‚</div></div>',1))]),H.value?(i(),r("div",Lt,[...e[6]||(e[6]=[o("div",{class:"tw-animate-spin tw-rounded-full tw-h-12 tw-w-12 tw-border-b-2 tw-border-indigo-500"},null,-1),o("p",{class:"tw-ml-4 tw-text-gray-600"},"è¼‰å…¥ä¸­...",-1)])])):(i(),r("div",zt,[(i(!0),r(C,null,S(a.value,s=>(i(),r("div",{key:s.date_info.date,class:$(["tw-rounded-lg tw-p-3 tw-shadow-lg tw-flex tw-flex-col tw-gap-y-3",s.is_closed?"tw-bg-gray-100":"tw-bg-white"])},[o("div",{class:$(["tw-text-white tw-p-2.5 tw-rounded-md tw-text-center",s.is_closed?"tw-bg-gray-400":"tw-bg-gradient-to-r tw-from-indigo-600 tw-to-purple-700"])},[o("h3",Nt,p(s.date_info.day_name),1),o("p",Vt,p(s.date_info.display),1)],2),o("div",Ft,[s.is_closed?(i(),r("div",Kt,[...e[7]||(e[7]=[nt(" ğŸ˜´",-1),o("br",null,null,-1),nt("æœ¬æ—¥ä¼‘è¨º ",-1)])])):(i(!0),r(C,{key:1},S(s.appointments,(n,l,y)=>(i(),r("div",{key:l,class:"tw-flex tw-items-center tw-gap-2"},[o("span",Ht,p(l),1),o("div",{class:$(["tw-relative tw-flex-1",{"tw-bg-green-100 tw-border-green-400":at(`${s.date_info.date}-${l}`)}]),onDragover:f(d=>gt(s.date_info.date,l,n),["prevent"]),onDragleave:d=>_t(s.date_info.date,l),onDrop:f(d=>mt(s.date_info.date,l),["prevent"])},[o("div",{class:$(["tw-w-full tw-p-1.5 tw-border tw-text-sm tw-rounded tw-cursor-pointer tw-flex tw-justify-between tw-items-center tw-min-w-0",{"tw-text-gray-500":!n.user_id,"tw-bg-red-200 tw-border-red-400 tw-text-red-800":n.user_id?.startsWith("manual_"),"tw-bg-white tw-border-gray-300 tw-text-gray-800":!n.user_id?.startsWith("manual_"),"tw-font-semibold":n.user_id&&n.user_id.startsWith("manual_")}]),onClick:d=>dt(s.date_info.date,l,y),title:n.user_name||"æœªé ç´„"},[o("span",Gt,p(n.user_name||"-- æœªé ç´„ --"),1),n.id?(i(),r("div",Jt,[o("span",{class:"tw-text-xs tw-font-mono tw-cursor-pointer",title:`é»æ“Šä»¥è®Šæ›´ç‹€æ…‹
ç›®å‰: ${n.reply_status}
å…§å®¹: ${n.last_reply||"ç„¡"}`,onClick:f(d=>xt(n,s.date_info.date,l),["stop"])},p(ut(n.reply_status)),9,qt),n.reply_status==="å·²å›è¦†"?(i(),r("button",{key:0,onClick:f(d=>bt(n.id,s.date_info.date,l),["stop"]),title:"ç¢ºèªå›è¦†",class:"tw-ml-1 tw-px-1.5 tw-py-0.5 tw-text-xs tw-bg-green-500 tw-text-white tw-rounded hover:tw-bg-green-600"}," âœ… ",8,Pt)):v("",!0)])):v("",!0),e[8]||(e[8]=o("span",{class:"tw-ml-2 tw-text-gray-400 tw-text-xs"},"â–¼",-1))],10,Zt),h.value===`${s.date_info.date}-${l}`?(i(),r("div",Qt,[g.value===1?(i(),r("div",Xt,[b.value?(i(),r("div",{key:0,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-blue-600 tw-font-bold tw-border-b hover:tw-bg-gray-100",onClick:f(d=>F(s.date_info.date,l,b.value.id,b.value.name),["stop"])}," â¡ï¸ åŒä¸Š ("+p(b.value.name)+") ",9,Yt)):v("",!0),o("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:f(d=>F(s.date_info.date,l,"","-- æœªé ç´„ --"),["stop"])},"-- æœªé ç´„ --",8,Dt),(i(!0),r(C,null,S(J.value,d=>(i(),r("div",{key:d,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:f(w=>Y(d),["stop"])},p(d),9,te))),128))])):v("",!0),g.value===2?(i(),r("div",ee,[o("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[2]||(e[2]=f(d=>g.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),(i(!0),r(C,null,S(B.value,d=>(i(),r("div",{key:d.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:f(w=>D(s.date_info.date,l,d),["stop"])},p(d.name),9,se))),128))])):v("",!0)])):v("",!0)],42,It)]))),128))]),s.is_closed?v("",!0):(i(),r("div",ne,[e[9]||(e[9]=o("h4",{class:"tw-text-sm tw-font-semibold tw-text-gray-500 tw-mb-2"},"å‚™å–åå–®",-1)),o("div",oe,[!s.waiting_list||s.waiting_list.length===0?(i(),r("div",re,"å°šç„¡å‚™å–")):v("",!0),(i(!0),r(C,null,S(s.waiting_list,n=>(i(),r("div",{key:n.id,class:"tw-flex tw-items-center tw-justify-between tw-p-1.5 tw-bg-yellow-50 tw-border tw-border-yellow-200 tw-rounded tw-cursor-grab",draggable:"true",onDragstart:l=>ft(l,n)},[o("span",null,p(n.user_name),1),o("button",{onClick:l=>vt(n.id,s.date_info.date),class:"tw-text-red-500 hover:tw-text-red-700 tw-text-xs"},"âœ•",8,ae)],40,ie))),128))]),o("div",le,[o("button",{onClick:n=>ct(s.date_info.date),class:"tw-w-full tw-text-xs tw-text-center tw-py-1.5 tw-bg-gray-100 hover:tw-bg-gray-200 tw-rounded-md tw-text-gray-600"},"+ æ–°å¢å‚™å–",8,we),h.value===`waiting-${s.date_info.date}`?(i(),r("div",ue,[g.value===1?(i(),r("div",de,[(i(!0),r(C,null,S(J.value,n=>(i(),r("div",{key:n,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:f(l=>Y(n),["stop"])},p(n),9,ce))),128))])):v("",!0),g.value===2?(i(),r("div",pe,[o("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[3]||(e[3]=f(n=>g.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),(i(!0),r(C,null,S(B.value,n=>(i(),r("div",{key:n.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:f(l=>D(s.date_info.date,null,n),["stop"])},p(n.name),9,ve))),128))])):v("",!0)])):v("",!0)])])),s.is_closed?v("",!0):(i(),r("button",{key:1,class:$(["tw-mt-2 tw-w-full tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition disabled:tw-cursor-not-allowed",wt(s)]),onClick:n=>ht(s.date_info.date,s.date_info.day_name),disabled:E.value[s.date_info.date]||!V(s)},p(lt(s)),11,fe))],2))),128))])),j.value.show?(i(),r("div",{key:2,class:$(["tw-fixed tw-top-5 tw-right-5 tw-px-5 tw-py-4 tw-rounded-md tw-shadow-lg tw-text-white",j.value.type==="success"?"tw-bg-gray-800":"tw-bg-red-700"])},p(j.value.message),3)):v("",!0),K.value?(i(),r("div",ge,[o("div",_e,[e[10]||(e[10]=o("h3",{class:"tw-text-lg tw-font-bold tw-mb-4"},"æ–°å¢è‡¨æ™‚ç”¨æˆ¶",-1)),Ut(o("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>W.value=s),placeholder:"è«‹è¼¸å…¥ç”¨æˆ¶å§“å",class:"tw-mt-1 tw-block tw-w-full tw-px-3 tw-py-2 tw-border tw-border-gray-300 tw-rounded-md tw-shadow-sm focus:tw-outline-none focus:tw-ring-indigo-500 focus:tw-border-indigo-500 sm:tw-text-sm",onKeyup:Ot(et,["enter"])},null,544),[[Mt,W.value]]),o("div",me,[o("button",{onClick:tt,class:"tw-px-4 tw-py-2 tw-bg-gray-300 tw-text-gray-800 tw-rounded-md hover:tw-bg-gray-400"}," å–æ¶ˆ "),o("button",{onClick:et,disabled:N.value||!W.value.trim(),class:"tw-px-4 tw-py-2 tw-bg-indigo-600 tw-text-white tw-rounded-md hover:tw-bg-indigo-700 disabled:tw-opacity-50 disabled:tw-cursor-not-allowed"},[N.value?(i(),r("span",he,"æ–°å¢ä¸­...")):(i(),r("span",xe,"ç¢ºå®šæ–°å¢"))],8,ye)])])])):v("",!0)]))}};jt(be).mount("#app");
