const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddManualUserModal-D967k0HM.js","assets/runtime-dom.esm-bundler-wIgYT9iR.js","assets/ReplyContentModal-CRfWvUgy.js"])))=>i.map(i=>d[i]);
import{r as _,c as z,o as te,a as ee,b as l,d as i,e as a,f as m,g as St,h as se,t as c,n as T,F as U,i as S,j as Et,w as d,k as At,v as Lt,u as Ot,l as Tt,m as ne}from"./runtime-dom.esm-bundler-wIgYT9iR.js";import{a as I}from"./index-R-lXtGyY.js";const oe="modulepreload",re=function(D){return"/static/"+D},It={},Mt=function(tt,J,E){let M=Promise.resolve();if(J&&J.length>0){let y=function(k){return Promise.all(k.map($=>Promise.resolve($).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),h=x?.nonce||x?.getAttribute("nonce");M=y(J.map(k=>{if(k=re(k),k in It)return;It[k]=!0;const $=k.endsWith(".css"),C=$?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${k}"]${C}`))return;const A=document.createElement("link");if(A.rel=$?"stylesheet":oe,$||(A.as="script"),A.crossOrigin="",A.href=k,h&&A.setAttribute("nonce",h),document.head.appendChild(A),$)return new Promise((R,W)=>{A.addEventListener("load",R),A.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${k}`)))})}))}function g(x){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=x,window.dispatchEvent(h),!h.defaultPrevented)throw x}return M.then(x=>{for(const h of x||[])h.status==="rejected"&&g(h.reason);return tt().catch(g)})},le={class:"tw-max-w-screen-2xl tw-mx-auto tw-font-sans"},ie={class:"tw-bg-white tw-p-5 tw-rounded-lg tw-shadow-md tw-mb-5"},ae={class:"tw-text-center tw-mb-4"},ue={class:"tw-text-xl tw-font-bold tw-text-indigo-600"},we={class:"tw-flex tw-flex-wrap tw-gap-2 tw-justify-center"},de=["disabled"],ce={key:0,class:"tw-flex tw-justify-center tw-items-center tw-py-10"},pe={key:1,class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 md:tw-grid-cols-3 lg:tw-grid-cols-5 tw-gap-3 tw-pb-4"},ge={class:"tw-text-base tw-font-bold"},fe={class:"tw-text-sm tw-opacity-90"},ve={class:"tw-flex-grow tw-space-y-1"},_e={key:0,class:"tw-flex-grow tw-flex tw-items-center tw-justify-center tw-text-center tw-text-gray-500 tw-font-bold tw-p-5 tw-bg-gray-200 tw-rounded-md"},ye={class:"tw-mb-2"},me={class:"tw-w-12 tw-text-right tw-text-sm tw-font-medium tw-text-gray-600"},he=["onDragover","onDragleave","onDrop"],xe=["onClick","title"],be={class:"tw-truncate tw-flex-1 tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-block"},ke={key:0,class:"tw-flex tw-items-center tw-flex-shrink-0 tw-ml-2"},$e=["title","onClick"],Ce=["onClick"],Ue={key:0,class:"tw-absolute tw-bottom-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-96 tw-flex tw-flex-col tw-overflow-hidden tw-z-10 tw-shadow-lg tw-mb-1"},Se={class:"tw-sticky tw-top-0 tw-bg-white tw-border-b tw-border-gray-200 tw-p-2"},Ee={class:"tw-overflow-y-auto tw-flex-1"},Ae={key:0},Le={key:0,class:"tw-px-2.5 tw-py-3 tw-text-sm tw-text-gray-500 tw-text-center"},Oe={key:1},Te=["onClick"],Ie=["onClick"],Me={key:1},Fe={key:0},Be=["onClick"],je=["onClick"],Ne={class:"tw-grid tw-grid-cols-5 tw-gap-1 tw-p-1"},Re=["onClick"],We={key:1},Ge={class:"tw-grid tw-grid-cols-4 tw-gap-1 tw-p-1"},Pe=["onClick"],ze={key:2},Ve=["onClick"],Je={class:"tw-mt-3"},qe={class:"tw-w-12 tw-text-right tw-text-sm tw-font-medium tw-text-gray-600"},He=["onDragover","onDragleave","onDrop"],Ke=["onClick","title"],Ze={class:"tw-truncate tw-flex-1 tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-block"},Qe={key:0,class:"tw-flex tw-items-center tw-flex-shrink-0 tw-ml-2"},Xe=["title","onClick"],Ye=["onClick"],De={key:0,class:"tw-absolute tw-bottom-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-96 tw-flex tw-flex-col tw-overflow-hidden tw-z-10 tw-shadow-lg tw-mb-1"},ts={class:"tw-sticky tw-top-0 tw-bg-white tw-border-b tw-border-gray-200 tw-p-2"},es={class:"tw-overflow-y-auto tw-flex-1"},ss={key:0},ns={key:0,class:"tw-px-2.5 tw-py-3 tw-text-sm tw-text-gray-500 tw-text-center"},os={key:1},rs=["onClick"],ls=["onClick"],is={key:1},as={key:0},us=["onClick"],ws=["onClick"],ds={class:"tw-grid tw-grid-cols-5 tw-gap-1 tw-p-1"},cs=["onClick"],ps={key:1},gs={class:"tw-grid tw-grid-cols-4 tw-gap-1 tw-p-1"},fs=["onClick"],vs={key:2},_s=["onClick"],ys={key:0,class:"tw-mt-4 tw-pt-3 tw-border-t"},ms={class:"tw-space-y-1 tw-text-sm"},hs={key:0,class:"tw-text-gray-400 tw-text-xs tw-text-center tw-py-2"},xs=["onDragstart"],bs=["onClick"],ks={class:"tw-relative tw-mt-2"},$s=["onClick"],Cs={key:0,class:"tw-absolute tw-bottom-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-80 tw-overflow-y-auto tw-z-10 tw-shadow-lg tw-mb-1"},Us={key:0},Ss={class:"tw-grid tw-grid-cols-5 tw-gap-1 tw-p-1"},Es=["onClick"],As={key:1},Ls={class:"tw-grid tw-grid-cols-4 tw-gap-1 tw-p-1"},Os=["onClick"],Ts={key:2},Is=["onClick"],Ms=["onClick","disabled"],Fs={__name:"App",setup(D){const tt=Tt(()=>Mt(()=>import("./AddManualUserModal-D967k0HM.js"),__vite__mapDeps([0,1]))),J=Tt(()=>Mt(()=>import("./ReplyContentModal-CRfWvUgy.js"),__vite__mapDeps([2,1]))),E=_([]),M=_({}),g=_({}),x=_(0),h=_(null),y=_(1),k=_([]),$=_(""),C=_(null),A=_({show:!1,message:"",type:"info"}),R=_(!1),W=_({}),H=_(!1),K=_({}),G=_(null),P=_(null),et=_(!1),st=_(!1),B=_({show:!1,type:"",content:"",isConfirmed:!1,appointment:null,date:null,appointment:null,date:null,time:null,type:"consultation"}),nt=_(!0),wt=_(null),dt=z(()=>x.value===0?"æœ¬é€±é ç´„":x.value===1?"ä¸‹é€±é ç´„":x.value===-1?"ä¸Šé€±é ç´„":x.value>1?`æœªä¾†ç¬¬ ${x.value} é€±`:`éå»ç¬¬ ${Math.abs(x.value)} é€±`),Ft=z(()=>{const t=new Map;return E.value.forEach(e=>{e&&e.id!==void 0&&e.id!==null&&t.set(e.id.toString(),e)}),t}),ot=z(()=>{const t="ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦#";return Object.keys(M.value).sort((e,s)=>e==="#"?1:s==="#"?-1:t.indexOf(e)-t.indexOf(s))}),Z=z(()=>{if(!$.value.trim())return E.value;const t=$.value.toLowerCase();return E.value.filter(e=>e.name.toLowerCase().includes(t)||e.zhuyin&&e.zhuyin.toLowerCase().includes(t))}),rt=z(()=>{for(const t in g.value)if(Q(g.value[t]))return!0;return!1}),Bt=z(()=>R.value?"ç™¼é€ä¸­...":H.value?"æœ¬é€±æé†’å·²ç™¼é€":rt.value?"ç™¼é€æ•´é€±æé†’":"æœ¬é€±ç„¡å¯æé†’å°è±¡"),jt=z(()=>R.value?"tw-bg-gray-400 tw-text-white":rt.value?H.value?"tw-bg-blue-600 tw-text-white":"tw-bg-white tw-text-gray-700 tw-border tw-border-gray-300 hover:tw-bg-gray-50":"tw-bg-red-200 tw-text-red-700");function ct(t){return P.value===t}function Q(t){if(!t||t.is_closed)return!1;const e=s=>{if(!s)return!1;for(const n in s){const r=s[n];if(r.user_id){const u=Ft.value.get(r.user_id.toString());if(u&&u.line_user_id&&u.line_user_id.startsWith("U"))return!0}}return!1};return e(t.appointments)||e(t.appointments_massage)}function Nt(t){const e=t.date_info.date;return W.value[e]?"ç™¼é€ä¸­...":K.value[e]?"æœ¬æ—¥æé†’å·²ç™¼é€":Q(t)?`ğŸ“¤ ç™¼é€ ${t.date_info.day_name} æé†’`:"æœ¬æ—¥ç„¡å¯æé†’å°è±¡"}function Rt(t){const e=t.date_info.date;return W.value[e]?"tw-bg-gray-400 tw-text-white":Q(t)?K.value[e]?"tw-bg-blue-600 tw-text-white":"tw-bg-white tw-text-gray-700 tw-border tw-border-gray-300 hover:tw-bg-gray-50":"tw-bg-red-200 tw-text-red-700"}const pt=t=>{if(t.last_reply)return t.last_reply.confirmed?"ğŸŸ¢":"ğŸŸ¡";switch(t.reply_status){case"å·²ç¢ºèª":return"ğŸŸ¢";case"å·²å›è¦†":return"ğŸŸ¡";case"æœªå›è¦†":return"ğŸ”´";default:return"âšªï¸"}},gt=t=>{let e="æœªçŸ¥",s="ç„¡";if(t.last_reply){const n=t.last_reply.type==="image"?"åœ–ç‰‡":"æ–‡å­—";e=t.last_reply.confirmed?"å·²ç¢ºèª":`æœ‰æ–°çš„${n}å›è¦† (é»æ“ŠæŸ¥çœ‹)`,s=t.last_reply.content||"N/A"}else t.reply_status&&(e=t.reply_status,s=t.last_reply||"ç„¡");return`é»æ“ŠæŸ¥çœ‹æˆ–è®Šæ›´ç‹€æ…‹
ç›®å‰: ${e}
å…§å®¹: ${s}`};function p(t,e="success",s=3e3){A.value={show:!0,message:t,type:e},setTimeout(()=>{A.value.show=!1},s)}function X(t){return t.reduce((s,n)=>{const r=n.zhuyin?n.zhuyin[0]:"#";return s[r]||(s[r]=[]),s[r].push(n),s},{})}async function ft(){nt.value=!0;try{const t=await I.get(`/api/admin/get_week_appointments?offset=${x.value}`);E.value=t.data.users||[],M.value=X(E.value),g.value=t.data.week_schedule||{},p("âœ… è³‡æ–™å·²æ›´æ–°","success")}catch(t){p("âŒ æ’ç¨‹è¼‰å…¥å¤±æ•—","error"),console.error("Schedule loading error:",t)}finally{nt.value=!1}}async function Wt(){try{const e=(await I.get(`/api/admin/get_week_appointments?offset=${x.value}`)).data,s=e.week_schedule||{},n=e.users||[];JSON.stringify(E.value)!==JSON.stringify(n)&&(E.value=n,M.value=X(E.value));for(const r in g.value){const u=g.value[r],o=s[r];if(u&&o){const f=(L,w)=>{if(!L)return;new Set([...Object.keys(L),...Object.keys(w||{})]).forEach(v=>{const O=L[v],V=w?w[v]:null;V&&JSON.stringify(O)!==JSON.stringify(V)?L[v]={...V}:!V&&O&&O.user_id&&(L[v]={id:O.id,user_id:null,user_name:null,reply_status:"æœªå›è¦†",last_reply:null})})};f(u.appointments,o.appointments),u.appointments_massage||(u.appointments_massage={}),f(u.appointments_massage,o.appointments_massage),JSON.stringify(u.waiting_list)!==JSON.stringify(o.waiting_list)&&(u.waiting_list=o.waiting_list)}}console.log("Polling update complete at",new Date().toLocaleTimeString())}catch(t){console.error("Polling for updates failed:",t)}}async function vt(){p("è¼‰å…¥ä¸­...","info"),await ft()}function _t(t){x.value+=t,H.value=!1,K.value={},ft()}function q(){h.value=null,y.value=1,k.value=[],$.value=""}function yt(t,e,s,n="consultation"){const r=`${t}-${e}-${n}`;if(h.value===r)q(),C.value=null;else if(h.value=r,y.value=1,$.value="",C.value=null,s>0){const u=g.value[t],o=n==="massage"?u.appointments_massage:u.appointments;if(u&&o){const L=Object.keys(o).sort()[s-1],w=o[L];w&&w.user_id&&(C.value={id:w.user_id,name:w.user_name})}}}function Gt(t){const e=`waiting-${t}`;h.value===e?q():(h.value=e,y.value=1)}const Y=_([]),mt=_({}),F=_(1);function lt(t){const e=M.value[t]||[];if(e.length>10){const s={};e.forEach(r=>{const u=r.name?r.name.charAt(0):"å…¶ä»–";s[u]||(s[u]=[]),s[u].push(r)});const n=[];if(Object.keys(s).forEach(r=>{const u=s[r];u.length>1?(n.push({type:"group",surname:r,count:u.length,label:`${r} (${u.length})`}),mt.value[r]=u):n.push({type:"user",user:u[0]})}),n.sort((r,u)=>r.type==="group"&&u.type==="group"?u.count-r.count:r.type==="group"?-1:u.type==="group"?1:0),n.length<e.length){Y.value=n,y.value=3,F.value=1;return}}k.value=e,y.value=2,F.value=1}function it(t){k.value=mt.value[t],y.value=2,F.value=3}async function j(t,e,s,n,r=null,u="consultation"){console.log("[DEBUG selectUser] é–‹å§‹:",{date:t,time:e,userId:s,userName:n,type:u});const o=u==="massage"?g.value[t]?.appointments_massage:g.value[t]?.appointments,f=o?.[e]?.user_id,L=o?.[e]?.user_name;if(console.log("[DEBUG selectUser] åŸå§‹è³‡æ–™:",{originalUserId:f,originalUserName:L}),q(),g.value[t]&&o?.[e]){const w=o[e];w.user_id=s,w.user_name=n,console.log("[DEBUG selectUser] æ¨‚è§€æ›´æ–°å¾Œ:",{user_id:w.user_id,user_name:w.user_name}),!f&&s?(w.id=Date.now(),w.reply_status="æœªå›è¦†"):f&&!s&&(w.id=null,w.reply_status="æœªå›è¦†",w.last_reply="")}p("å„²å­˜ä¸­...","info");try{const w={date:t,time:e,user_id:s,user_name:n,waiting_list_item_id:r?Number(r):null,type:u};console.log("[DEBUG selectUser] ç™¼é€ API è«‹æ±‚:",w);const b=await I.post("/api/admin/save_appointment",w);if(console.log("[DEBUG selectUser] API å›æ‡‰:",b.data),b.data.status==="success"){p("âœ… é ç´„å·²å„²å­˜","success");const v=b.data.appointment;if(console.log("[DEBUG selectUser] æ–°é ç´„è³‡æ–™:",v),v&&g.value[t]&&o?.[e]){const O=o[e];O.id=v.id,O.reply_status=v.reply_status,O.last_reply=v.last_reply,v.user_name!==void 0&&(console.log("[DEBUG selectUser] æ›´æ–° user_name:",v.user_name),O.user_name=v.user_name),v.user_id!==void 0&&(console.log("[DEBUG selectUser] æ›´æ–° user_id:",v.user_id),O.user_id=v.user_id),console.log("[DEBUG selectUser] æœ€çµ‚ç‹€æ…‹:",{id:O.id,user_id:O.user_id,user_name:O.user_name,reply_status:O.reply_status}),r&&(E.value=E.value.filter(V=>V.id!==s),M.value=X(E.value))}else console.warn("[DEBUG selectUser] ç„¡æ³•æ›´æ–°å‰ç«¯ç‹€æ…‹:",{hasNewAppointment:!!v,hasDate:!!g.value[t],hasTime:!!o?.[e]});return!0}else throw new Error(b.data.message||"å„²å­˜å¤±æ•—")}catch(w){return console.error("[DEBUG selectUser] éŒ¯èª¤:",w),p(`âŒ å„²å­˜å¤±æ•—: ${w.message||"æœªçŸ¥éŒ¯èª¤"}`,"error"),g.value[t]&&o?.[e]&&(o[e].user_id=f,o[e].user_name=L,console.log("[DEBUG selectUser] å·²å›æ»¾:",{originalUserId:f,originalUserName:L})),!1}}async function Pt(t,e){q(),p("æ–°å¢å‚™å–ä¸­...","info");try{const s=await I.post("/api/admin/waiting_list",{date:t,user_id:e.id,user_name:e.name});if(s.data.status==="success")g.value[t].waiting_list||(g.value[t].waiting_list=[]),g.value[t].waiting_list.push(s.data.item),p("âœ… å·²æ–°å¢è‡³å‚™å–","success");else throw new Error(s.data.message||"æ–°å¢å¤±æ•—")}catch(s){p(`âŒ æ–°å¢å‚™å–å¤±æ•—: ${s.message}`,"error")}}async function zt(t,e){if(confirm("ç¢ºå®šè¦å¾å‚™å–åå–®ä¸­ç§»é™¤å—ï¼Ÿ"))try{await I.delete(`/api/admin/waiting_list/${t}`);const s=g.value[e];s&&s.waiting_list&&(s.waiting_list=s.waiting_list.filter(n=>n.id!==t)),p("âœ… å·²å¾å‚™å–ç§»é™¤","success")}catch{p("âŒ ç§»é™¤å¤±æ•—","error")}}function N(t,e,s,n="consultation"){h.value.startsWith("waiting-")?Pt(t,s):j(t,e,s.id,s.name,null,n)}function Vt(t,e){G.value=e,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",JSON.stringify(e))}function Jt(){setTimeout(()=>{G.value=null,P.value=null},50)}function ht(t,e,s,n="consultation"){G.value&&!s.user_id&&(P.value=`${t}-${e}-${n}`)}function xt(t,e,s="consultation"){P.value===`${t}-${e}-${s}`&&(P.value=null)}async function bt(t,e,s="consultation"){if(G.value&&P.value===`${t}-${e}-${s}`){const n={...G.value};P.value=null,await j(t,e,n.user_id,n.user_name,n.id,s)&&(g.value[t].waiting_list=g.value[t].waiting_list.filter(u=>u.id!==n.id))}}async function qt(){const t=Object.keys(g.value).sort();let e="";if(t.length>0){const s=g.value[t[0]].date_info.display,n=g.value[t[t.length-1]].date_info.display;e=` (${s} ~ ${n})`}if(confirm(`ç¢ºå®šè¦ç™¼é€ã€Œ${dt.value}ã€${e} çš„é ç´„æé†’å—ï¼Ÿ`)){R.value=!0;try{const n=(await I.post("/api/admin/send_appointment_reminders",{type:"week",offset:x.value})).data;p(`âœ… å·²ç™¼é€ ${n.sent_count} å‰‡æé†’${n.failed_count>0?`ï¼Œ${n.failed_count} å‰‡å¤±æ•—`:""}`),n.sent_count>0&&(H.value=!0)}catch{p("âŒ ç™¼é€å¤±æ•—","error")}finally{R.value=!1}}}async function Ht(t,e){if(confirm(`ç¢ºå®šè¦ç™¼é€ ${e} çš„é ç´„æé†’å—ï¼Ÿ`)){W.value[t]=!0;try{const n=(await I.post("/api/admin/send_appointment_reminders",{type:"day",date:t})).data;n.sent_count>0&&(K.value[t]=!0),p(`âœ… å·²ç™¼é€ ${e} çš„ ${n.sent_count} å‰‡æé†’${n.failed_count>0?`ï¼Œ${n.failed_count} å‰‡å¤±æ•—`:""}`)}catch{p("âŒ ç™¼é€å¤±æ•—","error")}finally{W.value[t]=!1}}}function Kt(){const{appointment:t,date:e,time:s,type:n}=B.value;kt(t,e,s,n,"æœªå›è¦†"),at()}async function kt(t,e,s,n="consultation",r=null){const u=g.value[e],o=n==="massage"?u.appointments_massage:u.appointments,f=Object.values(o),L=f.filter(b=>b.id!==t.id&&b.user_id===t.user_id);if(L.length>0&&(t.reply_status==="æœªå›è¦†"||t.reply_status==="å·²å›è¦†")&&confirm(`ã€Œ${t.user_name}ã€åœ¨ ${e} é‚„æœ‰å…¶ä»– ${L.length} å€‹é ç´„ï¼Œè¦å°‡ç•¶æ—¥æ‰€æœ‰é ç´„ä¸€ä½µæ¨™ç¤ºç‚ºã€Œå·²ç¢ºèªã€å—ï¼Ÿ`)){p("æ‰¹æ¬¡ç¢ºèªä¸­...","info");try{const b=await I.post("/api/admin/confirm_user_day_replies",{user_id:t.user_id,date:e});if(b.data.status==="success")f.forEach(v=>{v.user_id===t.user_id&&(v.reply_status="å·²ç¢ºèª")}),p("âœ… å·²æ‰¹æ¬¡ç¢ºèªå®Œç•¢","success");else throw new Error(b.data.message||"æ‰¹æ¬¡ç¢ºèªå¤±æ•—")}catch(b){p(`âŒ æ‰¹æ¬¡ç¢ºèªå¤±æ•—: ${b.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}return}let w;r?w=r:t.reply_status==="æœªå›è¦†"||t.reply_status==="å·²å›è¦†"?w="å·²ç¢ºèª":w="æœªå›è¦†",p("æ›´æ–°ç‹€æ…‹ä¸­...","info");try{const b=await I.put(`/api/admin/appointments/${t.id}/reply_status`,{status:w});if(b.data.status==="success"){const v=o[s];v&&(v.reply_status=w,w==="å·²ç¢ºèª"&&v.last_reply?v.last_reply.confirmed=!0:w==="æœªå›è¦†"&&(v.last_reply=null)),p(`âœ… ç‹€æ…‹å·²æ›´æ–°ç‚ºã€Œ${w}ã€`,"success")}else throw new Error(b.data.message||"æ›´æ–°å¤±æ•—")}catch(b){p(`âŒ æ›´æ–°ç‹€æ…‹å¤±æ•—: ${b.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}}function at(){B.value.show=!1}function Zt(){const{appointment:t,date:e,time:s,type:n}=B.value;t&&t.id&&ut(t.id,e,s,n),at()}function Qt(t,e,s,n="consultation"){if(!t.last_reply)return;let r="æ–‡å­—",u="",o=!1;typeof t.last_reply=="string"?(u=t.last_reply,o=t.reply_status==="å·²ç¢ºèª"):(r=t.last_reply.type==="image"?"åœ–ç‰‡":"æ–‡å­—",u=t.last_reply.content,o=t.last_reply.confirmed),B.value={show:!0,type:r,content:u,isConfirmed:o,appointment:t,date:e,time:s,type:n}}function $t(t,e,s,n="consultation"){const r=t.last_reply;let u=!1;r&&(typeof t.last_reply=="object"?u=t.last_reply.confirmed:u=t.reply_status==="å·²ç¢ºèª"),r&&!u?Qt(t,e,s,n):kt(t,e,s,n)}async function ut(t,e,s,n="consultation"){p("ç¢ºèªä¸­...","info");try{const r=await I.post(`/api/admin/appointments/${t}/confirm_reply`);if(r.data.status==="success"){const u=g.value[e],f=(n==="massage"?u.appointments_massage:u.appointments)?.[s];f&&(f.reply_status="å·²ç¢ºèª",f.last_reply&&typeof f.last_reply=="object"&&(f.last_reply.confirmed=!0)),p("âœ… å·²ç¢ºèªå›è¦†","success")}else throw new Error(r.data.message||"ç¢ºèªå¤±æ•—")}catch(r){p(`âŒ ç¢ºèªå¤±æ•—: ${r.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}}function Xt(){et.value=!0}function Ct(){et.value=!1}async function Yt(){if(!arguments[0]){p("ç”¨æˆ¶å§“åä¸èƒ½ç‚ºç©ºã€‚","error");return}st.value=!0;try{const t=await I.post("/api/admin/users/add_manual",{name:arguments[0]});if(t.data.status==="success"){const e=t.data.user;E.value.push(e),M.value=X(E.value),p(`âœ… è‡¨æ™‚ç”¨æˆ¶ "${e.name}" å·²æ–°å¢ã€‚`,"success"),Ct()}else throw new Error(t.data.message||"æ–°å¢å¤±æ•—")}catch(t){p(`âŒ æ–°å¢è‡¨æ™‚ç”¨æˆ¶å¤±æ•—: ${t.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}finally{st.value=!1}}const Ut=t=>{const e=t.target.closest(".tw-relative"),s=t.target.closest('[draggable="true"]');!e&&!s&&q()};async function Dt(){try{console.warn("VITE_LIFF_ID is not defined. LIFF initialization skipped.");return}catch(t){console.error("LIFF initialization failed:",t)}}return te(()=>{Dt(),vt(),wt.value=setInterval(Wt,15e3),document.addEventListener("click",Ut)}),ee(()=>{clearInterval(wt.value),document.removeEventListener("click",Ut)}),(t,e)=>(i(),l("div",le,[a("div",ie,[a("div",ae,[a("h2",ue,c(dt.value),1)]),a("div",we,[a("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:e[0]||(e[0]=s=>_t(-1))},"â¬…ï¸ ä¸Šä¸€é€±"),a("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:e[1]||(e[1]=s=>_t(1))},"ä¸‹ä¸€é€± â¡ï¸"),a("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:vt},"ğŸ”„ é‡æ–°è¼‰å…¥"),a("button",{class:T(["tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition disabled:tw-cursor-not-allowed",jt.value]),onClick:qt,disabled:R.value||!rt.value},"ğŸ“¨ "+c(Bt.value),11,de),a("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-green-600 tw-text-white hover:tw-bg-green-700",onClick:Xt},"â• æ–°å¢è‡¨æ™‚ç”¨æˆ¶")]),e[12]||(e[12]=se('<div class="tw-text-center tw-mt-3 tw-text-xs tw-text-gray-500 tw-space-y-1"><div>æé†’æŒ‰éˆ•ï¼š<span class="tw-font-semibold tw-text-gray-700">ç™½è‰²</span>=å¯ç™¼é€, <span class="tw-font-semibold tw-text-blue-600">è—è‰²</span>=å·²ç™¼é€, <span class="tw-font-semibold tw-text-red-600">ç´…è‰²</span>=ç„¡å¯æé†’å°è±¡</div><div>é ç´„æ™‚æ®µï¼š<span class="tw-px-1 tw-py-0.5 tw-rounded tw-bg-red-200 tw-text-red-800 tw-font-semibold">ç´…è‰²åº•</span> = è‡¨æ™‚ç”¨æˆ¶ (ç„¡æ³•ç™¼é€LINEæé†’)</div><div class="tw-pt-1">ç‹€æ…‹ç‡ˆè™Ÿèªªæ˜ï¼š<span class="tw-font-mono">ğŸ”´</span>=æœªå›è¦†, <span class="tw-font-mono">ğŸŸ¡</span>=å·²å›è¦†(ç³»çµ±è‡ªå‹•æ¨™è¨˜), <span class="tw-font-mono">ğŸŸ¢</span>=å·²ç¢ºèª(æ‰‹å‹•æ¨™è¨˜)ã€‚é»æ“Šç‡ˆè™Ÿå¯æ‰‹å‹•åˆ‡æ›ç‹€æ…‹ã€‚</div></div>',1))]),nt.value?(i(),l("div",ce,[...e[13]||(e[13]=[a("div",{class:"tw-animate-spin tw-rounded-full tw-h-12 tw-w-12 tw-border-b-2 tw-border-indigo-500"},null,-1),a("p",{class:"tw-ml-4 tw-text-gray-600"},"è¼‰å…¥ä¸­...",-1)])])):(i(),l("div",pe,[(i(!0),l(U,null,S(g.value,s=>(i(),l("div",{key:s.date_info.date,class:T(["tw-rounded-lg tw-p-3 tw-shadow-lg tw-flex tw-flex-col tw-gap-y-3",s.is_closed?"tw-bg-gray-100":"tw-bg-white"])},[a("div",{class:T(["tw-text-white tw-p-2.5 tw-rounded-md tw-text-center",s.is_closed?"tw-bg-gray-400":"tw-bg-gradient-to-r tw-from-indigo-600 tw-to-purple-700"])},[a("h3",ge,c(s.date_info.day_name),1),a("p",fe,c(s.date_info.display),1)],2),a("div",ve,[s.is_closed?(i(),l("div",_e,[...e[14]||(e[14]=[Et(" ğŸ˜´",-1),a("br",null,null,-1),Et("æœ¬æ—¥ä¼‘è¨º ",-1)])])):(i(),l(U,{key:1},[a("div",ye,[e[16]||(e[16]=a("div",{class:"tw-text-xs tw-font-bold tw-text-gray-500 tw-mb-1 tw-border-b tw-pb-1"},"çœ‹è¨ºæ™‚æ®µ",-1)),(i(!0),l(U,null,S(s.appointments,(n,r,u)=>(i(),l("div",{key:"consultation-"+r,class:"tw-flex tw-items-center tw-gap-2 tw-mb-1"},[a("span",me,c(r),1),a("div",{class:T(["tw-relative tw-flex-1",{"tw-bg-green-100 tw-border-2 tw-border-dashed tw-border-green-400":ct(`${s.date_info.date}-${r}-consultation`)}]),onDragover:d(o=>ht(s.date_info.date,r,n,"consultation"),["prevent"]),onDragleave:o=>xt(s.date_info.date,r,"consultation"),onDrop:d(o=>bt(s.date_info.date,r,"consultation"),["prevent"])},[a("div",{class:T(["tw-w-full tw-p-1.5 tw-border tw-text-sm tw-rounded tw-cursor-pointer tw-flex tw-justify-between tw-items-center tw-min-w-0",{"tw-text-gray-500":!n.user_id,"tw-bg-red-200 tw-border-red-400 tw-text-red-800":n.user_id?.startsWith("manual_"),"tw-bg-white tw-border-gray-300 tw-text-gray-800":!n.user_id?.startsWith("manual_"),"tw-font-semibold":n.user_id&&n.user_id.startsWith("manual_")}]),onClick:o=>yt(s.date_info.date,r,u,"consultation"),title:n.user_name||"æœªé ç´„"},[a("span",be,c(n.user_name||"-- æœªé ç´„ --"),1),n.id?(i(),l("div",ke,[a("span",{class:"tw-text-xs tw-font-mono tw-cursor-pointer",title:gt(n),onClick:d(o=>$t(n,s.date_info.date,r,"consultation"),["stop"])},c(pt(n)),9,$e),n.reply_status==="å·²å›è¦†"?(i(),l("button",{key:0,onClick:d(o=>ut(n.id,s.date_info.date,r,"consultation"),["stop"]),title:"ç¢ºèªå›è¦†",class:"tw-ml-1 tw-px-1.5 tw-py-0.5 tw-text-xs tw-bg-green-500 tw-text-white tw-rounded hover:tw-bg-green-600"}," âœ… ",8,Ce)):m("",!0)])):m("",!0),e[15]||(e[15]=a("span",{class:"tw-ml-2 tw-text-gray-400 tw-text-xs"},"â–¼",-1))],10,xe),h.value===`${s.date_info.date}-${r}-consultation`?(i(),l("div",Ue,[a("div",Se,[At(a("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>$.value=o),type:"text",placeholder:"ğŸ” æœå°‹ç”¨æˆ¶åç¨±...",class:"tw-w-full tw-px-2 tw-py-1.5 tw-text-sm tw-border tw-border-gray-300 tw-rounded focus:tw-outline-none focus:tw-border-indigo-500",onClick:e[3]||(e[3]=d(()=>{},["stop"])),ref_for:!0,ref:"searchInput"},null,512),[[Lt,$.value]])]),a("div",Ee,[$.value.trim()?(i(),l("div",Ae,[Z.value.length===0?(i(),l("div",Le," æ‰¾ä¸åˆ°ç¬¦åˆçš„ç”¨æˆ¶ ")):(i(),l("div",Oe,[a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(o=>j(s.date_info.date,r,"","-- æœªé ç´„ --",null,"consultation"),["stop"])},"-- æœªé ç´„ --",8,Te),(i(!0),l(U,null,S(Z.value,o=>(i(),l("div",{key:o.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(f=>N(s.date_info.date,r,o,"consultation"),["stop"])},c(o.name),9,Ie))),128))]))])):(i(),l("div",Me,[y.value===1?(i(),l("div",Fe,[C.value?(i(),l("div",{key:0,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-blue-600 tw-font-bold tw-border-b hover:tw-bg-gray-100",onClick:d(o=>j(s.date_info.date,r,C.value.id,C.value.name,null,"consultation"),["stop"])}," â¡ï¸ åŒä¸Š ("+c(C.value.name)+") ",9,Be)):m("",!0),a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(o=>j(s.date_info.date,r,"","-- æœªé ç´„ --",null,"consultation"),["stop"])},"-- æœªé ç´„ --",8,je),a("div",Ne,[(i(!0),l(U,null,S(ot.value,o=>(i(),l("div",{key:o,class:"tw-px-1 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 tw-text-center tw-bg-gray-50 hover:tw-bg-gray-200 tw-rounded",onClick:d(f=>lt(o),["stop"])},c(o),9,Re))),128))])])):m("",!0),y.value===3?(i(),l("div",We,[a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[4]||(e[4]=d(o=>y.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),a("div",Ge,[(i(!0),l(U,null,S(Y.value,o=>(i(),l("div",{key:o.type==="group"?o.surname:o.user.id,class:T(["tw-px-1 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-center tw-rounded",o.type==="group"?"tw-bg-indigo-100 tw-text-indigo-800 hover:tw-bg-indigo-200":"tw-bg-gray-50 tw-text-gray-800 hover:tw-bg-gray-200"]),onClick:d(f=>o.type==="group"?it(o.surname):N(s.date_info.date,r,o.user,"consultation"),["stop"])},c(o.type==="group"?o.label:o.user.name),11,Pe))),128))])])):m("",!0),y.value===2?(i(),l("div",ze,[a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[5]||(e[5]=d(o=>y.value=F.value,["stop"]))},"â† è¿”å›"+c(F.value===3?"å§“æ°":"æ³¨éŸ³"),1),(i(!0),l(U,null,S(k.value,o=>(i(),l("div",{key:o.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(f=>N(s.date_info.date,r,o,"consultation"),["stop"])},c(o.name),9,Ve))),128))])):m("",!0)]))])])):m("",!0)],42,he)]))),128))]),a("div",Je,[e[18]||(e[18]=a("div",{class:"tw-text-xs tw-font-bold tw-text-gray-500 tw-mb-1 tw-border-b tw-pb-1"},"æ¨æ‹¿æ™‚æ®µ",-1)),(i(!0),l(U,null,S(s.appointments_massage,(n,r,u)=>(i(),l("div",{key:"massage-"+r,class:"tw-flex tw-items-center tw-gap-2 tw-mb-1"},[a("span",qe,c(r),1),a("div",{class:T(["tw-relative tw-flex-1",{"tw-bg-green-100 tw-border-2 tw-border-dashed tw-border-green-400":ct(`${s.date_info.date}-${r}-massage`)}]),onDragover:d(o=>ht(s.date_info.date,r,n,"massage"),["prevent"]),onDragleave:o=>xt(s.date_info.date,r,"massage"),onDrop:d(o=>bt(s.date_info.date,r,"massage"),["prevent"])},[a("div",{class:T(["tw-w-full tw-p-1.5 tw-border tw-text-sm tw-rounded tw-cursor-pointer tw-flex tw-justify-between tw-items-center tw-min-w-0",{"tw-text-gray-500":!n.user_id,"tw-bg-red-200 tw-border-red-400 tw-text-red-800":n.user_id?.startsWith("manual_"),"tw-bg-white tw-border-gray-300 tw-text-gray-800":!n.user_id?.startsWith("manual_"),"tw-font-semibold":n.user_id&&n.user_id.startsWith("manual_")}]),onClick:o=>yt(s.date_info.date,r,u,"massage"),title:n.user_name||"æœªé ç´„"},[a("span",Ze,c(n.user_name||"-- æœªé ç´„ --"),1),n.id?(i(),l("div",Qe,[a("span",{class:"tw-text-xs tw-font-mono tw-cursor-pointer",title:gt(n),onClick:d(o=>$t(n,s.date_info.date,r,"massage"),["stop"])},c(pt(n)),9,Xe),n.reply_status==="å·²å›è¦†"?(i(),l("button",{key:0,onClick:d(o=>ut(n.id,s.date_info.date,r,"massage"),["stop"]),title:"ç¢ºèªå›è¦†",class:"tw-ml-1 tw-px-1.5 tw-py-0.5 tw-text-xs tw-bg-green-500 tw-text-white tw-rounded hover:tw-bg-green-600"}," âœ… ",8,Ye)):m("",!0)])):m("",!0),e[17]||(e[17]=a("span",{class:"tw-ml-2 tw-text-gray-400 tw-text-xs"},"â–¼",-1))],10,Ke),h.value===`${s.date_info.date}-${r}-massage`?(i(),l("div",De,[a("div",ts,[At(a("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>$.value=o),type:"text",placeholder:"ğŸ” æœå°‹ç”¨æˆ¶åç¨±...",class:"tw-w-full tw-px-2 tw-py-1.5 tw-text-sm tw-border tw-border-gray-300 tw-rounded focus:tw-outline-none focus:tw-border-indigo-500",onClick:e[7]||(e[7]=d(()=>{},["stop"]))},null,512),[[Lt,$.value]])]),a("div",es,[$.value.trim()?(i(),l("div",ss,[Z.value.length===0?(i(),l("div",ns," æ‰¾ä¸åˆ°ç¬¦åˆçš„ç”¨æˆ¶ ")):(i(),l("div",os,[a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(o=>j(s.date_info.date,r,"","-- æœªé ç´„ --",null,"massage"),["stop"])},"-- æœªé ç´„ --",8,rs),(i(!0),l(U,null,S(Z.value,o=>(i(),l("div",{key:o.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(f=>N(s.date_info.date,r,o,"massage"),["stop"])},c(o.name),9,ls))),128))]))])):(i(),l("div",is,[y.value===1?(i(),l("div",as,[C.value?(i(),l("div",{key:0,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-blue-600 tw-font-bold tw-border-b hover:tw-bg-gray-100",onClick:d(o=>j(s.date_info.date,r,C.value.id,C.value.name,null,"massage"),["stop"])}," â¡ï¸ åŒä¸Š ("+c(C.value.name)+") ",9,us)):m("",!0),a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(o=>j(s.date_info.date,r,"","-- æœªé ç´„ --",null,"massage"),["stop"])},"-- æœªé ç´„ --",8,ws),a("div",ds,[(i(!0),l(U,null,S(ot.value,o=>(i(),l("div",{key:o,class:"tw-px-1 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 tw-text-center tw-bg-gray-50 hover:tw-bg-gray-200 tw-rounded",onClick:d(f=>lt(o),["stop"])},c(o),9,cs))),128))])])):m("",!0),y.value===3?(i(),l("div",ps,[a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[8]||(e[8]=d(o=>y.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),a("div",gs,[(i(!0),l(U,null,S(Y.value,o=>(i(),l("div",{key:o.type==="group"?o.surname:o.user.id,class:T(["tw-px-1 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-center tw-rounded",o.type==="group"?"tw-bg-indigo-100 tw-text-indigo-800 hover:tw-bg-indigo-200":"tw-bg-gray-50 tw-text-gray-800 hover:tw-bg-gray-200"]),onClick:d(f=>o.type==="group"?it(o.surname):N(s.date_info.date,r,o.user,"massage"),["stop"])},c(o.type==="group"?o.label:o.user.name),11,fs))),128))])])):m("",!0),y.value===2?(i(),l("div",vs,[a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[9]||(e[9]=d(o=>y.value=F.value,["stop"]))},"â† è¿”å›"+c(F.value===3?"å§“æ°":"æ³¨éŸ³"),1),(i(!0),l(U,null,S(k.value,o=>(i(),l("div",{key:o.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(f=>N(s.date_info.date,r,o,"massage"),["stop"])},c(o.name),9,_s))),128))])):m("",!0)]))])])):m("",!0)],42,He)]))),128))])],64))]),s.is_closed?m("",!0):(i(),l("div",ys,[e[19]||(e[19]=a("h4",{class:"tw-text-sm tw-font-semibold tw-text-gray-500 tw-mb-2"},"å‚™å–åå–®",-1)),a("div",ms,[!s.waiting_list||s.waiting_list.length===0?(i(),l("div",hs,"å°šç„¡å‚™å–")):m("",!0),(i(!0),l(U,null,S(s.waiting_list,n=>(i(),l("div",{key:n.id,class:T(["tw-flex tw-items-center tw-justify-between tw-p-1.5 tw-bg-yellow-50 tw-border tw-border-yellow-200 tw-rounded tw-cursor-grab tw-transition-opacity",{"tw-opacity-40":G.value&&G.value.id===n.id}]),draggable:"true",onDragstart:r=>Vt(r,n),onDragend:Jt},[a("span",null,c(n.user_name),1),a("button",{onClick:r=>zt(n.id,s.date_info.date),class:"tw-text-red-500 hover:tw-text-red-700 tw-text-xs"},"âœ•",8,bs)],42,xs))),128))]),a("div",ks,[a("button",{onClick:n=>Gt(s.date_info.date),class:"tw-w-full tw-text-xs tw-text-center tw-py-1.5 tw-bg-gray-100 hover:tw-bg-gray-200 tw-rounded-md tw-text-gray-600"},"+ æ–°å¢å‚™å–",8,$s),h.value===`waiting-${s.date_info.date}`?(i(),l("div",Cs,[y.value===1?(i(),l("div",Us,[a("div",Ss,[(i(!0),l(U,null,S(ot.value,n=>(i(),l("div",{key:n,class:"tw-px-1 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 tw-text-center tw-bg-gray-50 hover:tw-bg-gray-200 tw-rounded",onClick:d(r=>lt(n),["stop"])},c(n),9,Es))),128))])])):m("",!0),y.value===3?(i(),l("div",As,[a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[10]||(e[10]=d(n=>y.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),a("div",Ls,[(i(!0),l(U,null,S(Y.value,n=>(i(),l("div",{key:n.type==="group"?n.surname:n.user.id,class:T(["tw-px-1 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-center tw-rounded",n.type==="group"?"tw-bg-indigo-100 tw-text-indigo-800 hover:tw-bg-indigo-200":"tw-bg-gray-50 tw-text-gray-800 hover:tw-bg-gray-200"]),onClick:d(r=>n.type==="group"?it(n.surname):N(s.date_info.date,null,n.user),["stop"])},c(n.type==="group"?n.label:n.user.name),11,Os))),128))])])):m("",!0),y.value===2?(i(),l("div",Ts,[a("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[11]||(e[11]=d(n=>y.value=F.value,["stop"]))},"â† è¿”å›"+c(F.value===3?"å§“æ°":"æ³¨éŸ³"),1),(i(!0),l(U,null,S(k.value,n=>(i(),l("div",{key:n.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:d(r=>N(s.date_info.date,null,n),["stop"])},c(n.name),9,Is))),128))])):m("",!0)])):m("",!0)])])),s.is_closed?m("",!0):(i(),l("button",{key:1,class:T(["tw-mt-2 tw-w-full tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition disabled:tw-cursor-not-allowed",Rt(s)]),onClick:n=>Ht(s.date_info.date,s.date_info.day_name),disabled:W.value[s.date_info.date]||!Q(s)},c(Nt(s)),11,Ms))],2))),128))])),A.value.show?(i(),l("div",{key:2,class:T(["tw-fixed tw-top-5 tw-right-5 tw-px-5 tw-py-4 tw-rounded-md tw-shadow-lg tw-text-white",A.value.type==="success"?"tw-bg-gray-800":"tw-bg-red-700"])},c(A.value.message),3)):m("",!0),St(Ot(tt),{show:et.value,"is-adding":st.value,onClose:Ct,onSubmit:Yt},null,8,["show","is-adding"]),St(Ot(J),{show:B.value.show,type:B.value.type,content:B.value.content,"is-confirmed":B.value.isConfirmed,onClose:at,onConfirm:Zt,onResetStatus:Kt},null,8,["show","type","content","is-confirmed"])]))}};ne(Fs).mount("#app");
