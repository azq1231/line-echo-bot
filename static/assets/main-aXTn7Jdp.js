import{r as c,c as A,o as At,a as Ot,b as l,d as a,e as o,f as g,g as Tt,t as v,n as C,F as S,h as U,i as it,w as m,j as jt,v as Et,k as Wt,l as Lt}from"./runtime-dom.esm-bundler-jAXvPR8n.js";import{a as y}from"./index-R-lXtGyY.js";const Nt={class:"tw-max-w-screen-2xl tw-mx-auto tw-font-sans"},Rt={class:"tw-bg-white tw-p-5 tw-rounded-lg tw-shadow-md tw-mb-5"},Bt={class:"tw-text-center tw-mb-4"},zt={class:"tw-text-xl tw-font-bold tw-text-indigo-600"},It={class:"tw-flex tw-flex-wrap tw-gap-2 tw-justify-center"},Vt=["disabled"],Ft={key:0,class:"tw-flex tw-justify-center tw-items-center tw-py-10"},Jt={key:1,class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 md:tw-grid-cols-3 lg:tw-grid-cols-5 tw-gap-3 tw-pb-4"},Kt={class:"tw-text-base tw-font-bold"},Ht={class:"tw-text-sm tw-opacity-90"},Pt={class:"tw-flex-grow tw-space-y-1"},Zt={key:0,class:"tw-flex-grow tw-flex tw-items-center tw-justify-center tw-text-center tw-text-gray-500 tw-font-bold tw-p-5 tw-bg-gray-200 tw-rounded-md"},Gt={class:"tw-w-12 tw-text-right tw-text-sm tw-font-medium tw-text-gray-600"},qt=["onDragover","onDragleave","onDrop"],Qt=["onClick","title"],Xt={class:"tw-truncate tw-flex-1 tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-block"},Yt={key:0,class:"tw-flex tw-items-center tw-flex-shrink-0 tw-ml-2"},Dt=["title","onClick"],te=["onClick"],ee={key:0,class:"tw-absolute tw-top-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-48 tw-overflow-y-auto tw-z-10 tw-shadow-lg tw-mt-1"},se={key:0},ne=["onClick"],re=["onClick"],oe=["onClick"],ie={key:1},le=["onClick"],ae={key:0,class:"tw-mt-4 tw-pt-3 tw-border-t"},we={class:"tw-space-y-1 tw-text-sm"},ue={key:0,class:"tw-text-gray-400 tw-text-xs tw-text-center tw-py-2"},de=["onDragstart"],ce=["onClick"],pe={class:"tw-relative tw-mt-2"},fe=["onClick"],ve={key:0,class:"tw-absolute tw-bottom-full tw-left-0 tw-w-full tw-bg-white tw-border tw-border-gray-300 tw-rounded-md tw-max-h-48 tw-overflow-y-auto tw-z-10 tw-shadow-lg tw-mb-1"},ge={key:0},_e=["onClick"],me={key:1},ye=["onClick"],he=["onClick","disabled"],xe={key:3,class:"tw-fixed tw-inset-0 tw-bg-gray-600 tw-bg-opacity-50 tw-overflow-y-auto tw-h-full tw-w-full tw-z-50 tw-flex tw-justify-center tw-items-center"},be={class:"tw-relative tw-p-5 tw-border tw-w-96 tw-shadow-lg tw-rounded-md tw-bg-white"},ke={class:"tw-mt-4 tw-flex tw-justify-end tw-space-x-2"},$e=["disabled"],Ce={key:0},Se={key:1},Ue={__name:"App",setup(Me){const O=c([]),R=c({}),w=c({}),h=c(0),b=c(null),x=c(1),B=c([]),$=c(null),T=c({show:!1,message:"",type:"info"}),j=c(!1),E=c({}),z=c(!1),I=c({}),k=c(null),M=c(null),K=c(!1),W=c(""),V=c(!1),H=c(!0),G=c(null),q=A(()=>h.value===0?"æœ¬é€±é ç´„":h.value===1?"ä¸‹é€±é ç´„":h.value===-1?"ä¸Šé€±é ç´„":h.value>1?`æœªä¾†ç¬¬ ${h.value} é€±`:`éå»ç¬¬ ${Math.abs(h.value)} é€±`),lt=A(()=>{const t=new Map;return O.value.forEach(e=>{e&&e.id!==void 0&&e.id!==null&&t.set(e.id.toString(),e)}),t}),Q=A(()=>{const t="ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„§ã„¨ã„©ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦#";return Object.keys(R.value).sort((e,s)=>e==="#"?1:s==="#"?-1:t.indexOf(e)-t.indexOf(s))}),P=A(()=>{for(const t in w.value)if(F(w.value[t]))return!0;return!1}),at=A(()=>j.value?"ç™¼é€ä¸­...":z.value?"æœ¬é€±æé†’å·²ç™¼é€":P.value?"ç™¼é€æ•´é€±æé†’":"æœ¬é€±ç„¡å¯æé†’å°è±¡"),wt=A(()=>j.value?"tw-bg-gray-400 tw-text-white":P.value?z.value?"tw-bg-blue-600 tw-text-white":"tw-bg-white tw-text-gray-700 tw-border tw-border-gray-300 hover:tw-bg-gray-50":"tw-bg-red-200 tw-text-red-700");function ut(t){return M.value===t}function F(t){if(!t||t.is_closed||!t.appointments)return!1;for(const e in t.appointments){const s=t.appointments[e];if(s.user_id){const n=lt.value.get(s.user_id.toString());if(n&&n.line_user_id&&n.line_user_id.startsWith("U"))return!0}}return!1}function dt(t){const e=t.date_info.date;return E.value[e]?"ç™¼é€ä¸­...":I.value[e]?"æœ¬æ—¥æé†’å·²ç™¼é€":F(t)?`ğŸ“¤ ç™¼é€ ${t.date_info.day_name} æé†’`:"æœ¬æ—¥ç„¡å¯æé†’å°è±¡"}function ct(t){const e=t.date_info.date;return E.value[e]?"tw-bg-gray-400 tw-text-white":F(t)?I.value[e]?"tw-bg-blue-600 tw-text-white":"tw-bg-white tw-text-gray-700 tw-border tw-border-gray-300 hover:tw-bg-gray-50":"tw-bg-red-200 tw-text-red-700"}const pt=t=>{if(t.last_reply)return t.last_reply.confirmed?"ğŸŸ¢":"ğŸŸ¡";switch(t.reply_status){case"å·²ç¢ºèª":return"ğŸŸ¢";case"å·²å›è¦†":return"ğŸŸ¡";case"æœªå›è¦†":return"ğŸ”´";default:return"âšªï¸"}},ft=t=>{let e="æœªçŸ¥",s="ç„¡";if(t.last_reply){const n=t.last_reply.type==="image"?"åœ–ç‰‡":"æ–‡å­—";e=t.last_reply.confirmed?"å·²ç¢ºèª":`æœ‰æ–°çš„${n}å›è¦†`,s=t.last_reply.content||"N/A"}else t.reply_status&&(e=t.reply_status,s=t.last_reply||"ç„¡");return`é»æ“Šä»¥è®Šæ›´ç‹€æ…‹
ç›®å‰: ${e}
å…§å®¹: ${s}`};function d(t,e="success",s=3e3){T.value={show:!0,message:t,type:e},setTimeout(()=>{T.value.show=!1},s)}function X(t){return t.reduce((s,n)=>{const r=n.zhuyin?n.zhuyin[0]:"#";return s[r]||(s[r]=[]),s[r].push(n),s},{})}async function Y(){H.value=!0;try{const t=await y.get(`/api/admin/get_week_appointments?offset=${h.value}`);O.value=t.data.users||[],R.value=X(O.value),w.value=t.data.week_schedule||{},d("âœ… è³‡æ–™å·²æ›´æ–°","success")}catch(t){d("âŒ æ’ç¨‹è¼‰å…¥å¤±æ•—","error"),console.error("Schedule loading error:",t)}finally{H.value=!1}}async function vt(){try{const e=(await y.get(`/api/admin/get_week_appointments?offset=${h.value}`)).data,s=e.week_schedule||{},n=e.users||[],r=new Map;n.forEach(p=>{p&&p.id&&r.set(p.id.toString(),p)});for(const p in w.value)if(s[p]){const u=w.value[p],i=s[p];for(const f in u.appointments){const _=u.appointments[f],N=i.appointments[f];if(_&&N&&((JSON.stringify(_.last_reply)!==JSON.stringify(N.last_reply)||_.reply_status!==N.reply_status)&&(_.last_reply=N.last_reply,_.reply_status=N.reply_status),_.user_id)){const Z=r.get(_.user_id.toString());Z&&_.user_name!==Z.name&&(_.user_name=Z.name)}}}console.log("Polling update complete at",new Date().toLocaleTimeString())}catch(t){console.error("Polling for updates failed:",t)}}async function D(){d("è¼‰å…¥ä¸­...","info"),await Y()}function tt(t){h.value+=t,z.value=!1,I.value={},Y()}function L(){b.value=null,x.value=1,B.value=[]}function gt(t,e,s){const n=`${t}-${e}`;if(b.value===n)L(),$.value=null;else if(b.value=n,x.value=1,$.value=null,s>0){const r=w.value[t];if(r&&r.appointments){const u=Object.keys(r.appointments)[s-1],i=r.appointments[u];i&&i.user_id&&($.value={id:i.user_id,name:i.user_name})}}}function _t(t){const e=`waiting-${t}`;b.value===e?L():(b.value=e,x.value=1)}function et(t){B.value=R.value[t]||[],x.value=2}async function J(t,e,s,n,r=null){const p=w.value[t]?.appointments[e]?.user_id,u=w.value[t]?.appointments[e]?.user_name;if(L(),w.value[t]&&w.value[t].appointments[e]){const i=w.value[t].appointments[e];i.user_id=s,i.user_name=n,!p&&s?(i.id=Date.now(),i.reply_status="æœªå›è¦†"):p&&!s&&(i.id=null,i.reply_status="æœªå›è¦†",i.last_reply="")}d("å„²å­˜ä¸­...","info");try{const i=await y.post("/api/admin/save_appointment",{date:t,time:e,user_id:s,user_name:n,waiting_list_item_id:typeof r=="number"?r:null});if(i.data.status==="success"){d("âœ… é ç´„å·²å„²å­˜","success");const f=i.data.appointment;if(f&&w.value[t]&&w.value[t].appointments[e]){const _=w.value[t].appointments[e];_.id=f.id,_.reply_status=f.reply_status,_.last_reply=f.last_reply}}else throw new Error(i.data.message||"å„²å­˜å¤±æ•—")}catch(i){d(`âŒ å„²å­˜å¤±æ•—: ${i.message||"æœªçŸ¥éŒ¯èª¤"}`,"error"),w.value[t]&&w.value[t].appointments[e]&&(w.value[t].appointments[e].user_id=p,w.value[t].appointments[e].user_name=u)}}async function mt(t,e){L(),d("æ–°å¢å‚™å–ä¸­...","info");try{const s=await y.post("/api/admin/waiting_list",{date:t,user_id:e.id,user_name:e.name});if(s.data.status==="success")w.value[t].waiting_list||(w.value[t].waiting_list=[]),w.value[t].waiting_list.push(s.data.item),d("âœ… å·²æ–°å¢è‡³å‚™å–","success");else throw new Error(s.data.message||"æ–°å¢å¤±æ•—")}catch(s){d(`âŒ æ–°å¢å‚™å–å¤±æ•—: ${s.message}`,"error")}}async function yt(t,e){if(confirm("ç¢ºå®šè¦å¾å‚™å–åå–®ä¸­ç§»é™¤å—ï¼Ÿ"))try{await y.delete(`/api/admin/waiting_list/${t}`);const s=w.value[e];s&&s.waiting_list&&(s.waiting_list=s.waiting_list.filter(n=>n.id!==t)),d("âœ… å·²å¾å‚™å–ç§»é™¤","success")}catch{d("âŒ ç§»é™¤å¤±æ•—","error")}}function st(t,e,s){b.value.startsWith("waiting-")?mt(t,s):J(t,e,s.id,s.name)}function ht(t,e){k.value=e,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",JSON.stringify(e))}function xt(t,e,s){k.value&&!s.user_id&&(M.value=`${t}-${e}`)}function bt(t,e){M.value===`${t}-${e}`&&(M.value=null)}async function kt(t,e){k.value&&M.value===`${t}-${e}`&&(await J(t,e,k.value.user_id,k.value.user_name,k.value.id),w.value[t].waiting_list=w.value[t].waiting_list.filter(s=>s.id!==k.value.id)),k.value=null,M.value=null}async function $t(){const t=Object.keys(w.value).sort();let e="";if(t.length>0){const s=w.value[t[0]].date_info.display,n=w.value[t[t.length-1]].date_info.display;e=` (${s} ~ ${n})`}if(confirm(`ç¢ºå®šè¦ç™¼é€ã€Œ${q.value}ã€${e} çš„é ç´„æé†’å—ï¼Ÿ`)){j.value=!0;try{const n=(await y.post("/api/admin/send_appointment_reminders",{type:"week",offset:h.value})).data;d(`âœ… å·²ç™¼é€ ${n.sent_count} å‰‡æé†’${n.failed_count>0?`ï¼Œ${n.failed_count} å‰‡å¤±æ•—`:""}`),n.sent_count>0&&(z.value=!0)}catch{d("âŒ ç™¼é€å¤±æ•—","error")}finally{j.value=!1}}}async function Ct(t,e){if(confirm(`ç¢ºå®šè¦ç™¼é€ ${e} çš„é ç´„æé†’å—ï¼Ÿ`)){E.value[t]=!0;try{const n=(await y.post("/api/admin/send_appointment_reminders",{type:"day",date:t})).data;n.sent_count>0&&(I.value[t]=!0),d(`âœ… å·²ç™¼é€ ${e} çš„ ${n.sent_count} å‰‡æé†’${n.failed_count>0?`ï¼Œ${n.failed_count} å‰‡å¤±æ•—`:""}`)}catch{d("âŒ ç™¼é€å¤±æ•—","error")}finally{E.value[t]=!1}}}async function St(t,e,s){const n=Object.values(w.value[e].appointments),r=n.filter(i=>i.id!==t.id&&i.user_id===t.user_id);if(r.length>0&&(t.reply_status==="æœªå›è¦†"||t.reply_status==="å·²å›è¦†")&&confirm(`ã€Œ${t.user_name}ã€åœ¨ ${e} é‚„æœ‰å…¶ä»– ${r.length} å€‹é ç´„ï¼Œè¦å°‡ç•¶æ—¥æ‰€æœ‰é ç´„ä¸€ä½µæ¨™ç¤ºç‚ºã€Œå·²ç¢ºèªã€å—ï¼Ÿ`)){d("æ‰¹æ¬¡ç¢ºèªä¸­...","info");try{const i=await y.post("/api/admin/confirm_user_day_replies",{user_id:t.user_id,date:e});if(i.data.status==="success")n.forEach(f=>{f.user_id===t.user_id&&(f.reply_status="å·²ç¢ºèª")}),d("âœ… å·²æ‰¹æ¬¡ç¢ºèªå®Œç•¢","success");else throw new Error(i.data.message||"æ‰¹æ¬¡ç¢ºèªå¤±æ•—")}catch(i){d(`âŒ æ‰¹æ¬¡ç¢ºèªå¤±æ•—: ${i.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}return}const p=t.reply_status;let u;p==="æœªå›è¦†"||p==="å·²å›è¦†"?u="å·²ç¢ºèª":u="æœªå›è¦†",d("æ›´æ–°ç‹€æ…‹ä¸­...","info");try{const i=await y.put(`/api/admin/appointments/${t.id}/reply_status`,{status:u});if(i.data.status==="success"){const f=w.value[e]?.appointments[s];f&&(f.reply_status=u,u==="å·²ç¢ºèª"&&f.last_reply?f.last_reply.confirmed=!0:u==="æœªå›è¦†"&&(f.last_reply=null)),d(`âœ… ç‹€æ…‹å·²æ›´æ–°ç‚ºã€Œ${u}ã€`,"success")}else throw new Error(i.data.message||"æ›´æ–°å¤±æ•—")}catch(i){d(`âŒ æ›´æ–°ç‹€æ…‹å¤±æ•—: ${i.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}}async function Ut(t,e,s){d("ç¢ºèªä¸­...","info");try{const n=await y.post(`/api/admin/appointments/${t}/confirm_reply`);if(n.data.status==="success"){const r=w.value[e]?.appointments[s];r&&(r.reply_status="å·²ç¢ºèª",r.last_reply&&typeof r.last_reply=="object"&&(r.last_reply.confirmed=!0)),d("âœ… å·²ç¢ºèªå›è¦†","success")}else throw new Error(n.data.message||"ç¢ºèªå¤±æ•—")}catch(n){d(`âŒ ç¢ºèªå¤±æ•—: ${n.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}}function Mt(){K.value=!0,W.value=""}function nt(){K.value=!1}async function rt(){const t=W.value.trim();if(!t){d("ç”¨æˆ¶å§“åä¸èƒ½ç‚ºç©ºã€‚","error");return}V.value=!0;try{const e=await y.post("/api/admin/users/add_manual",{name:t});if(e.data.status==="success"){const s=e.data.user;O.value.push(s),R.value=X(O.value),d(`âœ… è‡¨æ™‚ç”¨æˆ¶ "${s.name}" å·²æ–°å¢ã€‚`,"success"),nt()}else throw new Error(e.data.message||"æ–°å¢å¤±æ•—")}catch(e){d(`âŒ æ–°å¢è‡¨æ™‚ç”¨æˆ¶å¤±æ•—: ${e.message||"æœªçŸ¥éŒ¯èª¤"}`,"error")}finally{V.value=!1}}const ot=t=>{t.target.closest(".tw-relative")||L()};return At(()=>{D(),G.value=setInterval(vt,15e3),document.addEventListener("click",ot)}),Ot(()=>{clearInterval(G.value),document.removeEventListener("click",ot)}),(t,e)=>(a(),l("div",Nt,[o("div",Rt,[o("div",Bt,[o("h2",zt,v(q.value),1)]),o("div",It,[o("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:e[0]||(e[0]=s=>tt(-1))},"â¬…ï¸ ä¸Šä¸€é€±"),o("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:e[1]||(e[1]=s=>tt(1))},"ä¸‹ä¸€é€± â¡ï¸"),o("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-indigo-600 tw-text-white hover:tw-bg-indigo-700",onClick:D},"ğŸ”„ é‡æ–°è¼‰å…¥"),o("button",{class:C(["tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition disabled:tw-cursor-not-allowed",wt.value]),onClick:$t,disabled:j.value||!P.value},"ğŸ“¨ "+v(at.value),11,Vt),o("button",{class:"tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition tw-bg-green-600 tw-text-white hover:tw-bg-green-700",onClick:Mt},"â• æ–°å¢è‡¨æ™‚ç”¨æˆ¶")]),e[5]||(e[5]=Tt('<div class="tw-text-center tw-mt-3 tw-text-xs tw-text-gray-500 tw-space-y-1"><div>æé†’æŒ‰éˆ•ï¼š<span class="tw-font-semibold tw-text-gray-700">ç™½è‰²</span>=å¯ç™¼é€, <span class="tw-font-semibold tw-text-blue-600">è—è‰²</span>=å·²ç™¼é€, <span class="tw-font-semibold tw-text-red-600">ç´…è‰²</span>=ç„¡å¯æé†’å°è±¡</div><div>é ç´„æ™‚æ®µï¼š<span class="tw-px-1 tw-py-0.5 tw-rounded tw-bg-red-200 tw-text-red-800 tw-font-semibold">ç´…è‰²åº•</span> = è‡¨æ™‚ç”¨æˆ¶ (ç„¡æ³•ç™¼é€LINEæé†’)</div><div class="tw-pt-1">ç‹€æ…‹ç‡ˆè™Ÿèªªæ˜ï¼š<span class="tw-font-mono">ğŸ”´</span>=æœªå›è¦†, <span class="tw-font-mono">ğŸŸ¡</span>=å·²å›è¦†(ç³»çµ±è‡ªå‹•æ¨™è¨˜), <span class="tw-font-mono">ğŸŸ¢</span>=å·²ç¢ºèª(æ‰‹å‹•æ¨™è¨˜)ã€‚é»æ“Šç‡ˆè™Ÿå¯æ‰‹å‹•åˆ‡æ›ç‹€æ…‹ã€‚</div></div>',1))]),H.value?(a(),l("div",Ft,[...e[6]||(e[6]=[o("div",{class:"tw-animate-spin tw-rounded-full tw-h-12 tw-w-12 tw-border-b-2 tw-border-indigo-500"},null,-1),o("p",{class:"tw-ml-4 tw-text-gray-600"},"è¼‰å…¥ä¸­...",-1)])])):(a(),l("div",Jt,[(a(!0),l(S,null,U(w.value,s=>(a(),l("div",{key:s.date_info.date,class:C(["tw-rounded-lg tw-p-3 tw-shadow-lg tw-flex tw-flex-col tw-gap-y-3",s.is_closed?"tw-bg-gray-100":"tw-bg-white"])},[o("div",{class:C(["tw-text-white tw-p-2.5 tw-rounded-md tw-text-center",s.is_closed?"tw-bg-gray-400":"tw-bg-gradient-to-r tw-from-indigo-600 tw-to-purple-700"])},[o("h3",Kt,v(s.date_info.day_name),1),o("p",Ht,v(s.date_info.display),1)],2),o("div",Pt,[s.is_closed?(a(),l("div",Zt,[...e[7]||(e[7]=[it(" ğŸ˜´",-1),o("br",null,null,-1),it("æœ¬æ—¥ä¼‘è¨º ",-1)])])):(a(!0),l(S,{key:1},U(s.appointments,(n,r,p)=>(a(),l("div",{key:r,class:"tw-flex tw-items-center tw-gap-2"},[o("span",Gt,v(r),1),o("div",{class:C(["tw-relative tw-flex-1",{"tw-bg-green-100 tw-border-green-400":ut(`${s.date_info.date}-${r}`)}]),onDragover:m(u=>xt(s.date_info.date,r,n),["prevent"]),onDragleave:u=>bt(s.date_info.date,r),onDrop:m(u=>kt(s.date_info.date,r),["prevent"])},[o("div",{class:C(["tw-w-full tw-p-1.5 tw-border tw-text-sm tw-rounded tw-cursor-pointer tw-flex tw-justify-between tw-items-center tw-min-w-0",{"tw-text-gray-500":!n.user_id,"tw-bg-red-200 tw-border-red-400 tw-text-red-800":n.user_id?.startsWith("manual_"),"tw-bg-white tw-border-gray-300 tw-text-gray-800":!n.user_id?.startsWith("manual_"),"tw-font-semibold":n.user_id&&n.user_id.startsWith("manual_")}]),onClick:u=>gt(s.date_info.date,r,p),title:n.user_name||"æœªé ç´„"},[o("span",Xt,v(n.user_name||"-- æœªé ç´„ --"),1),n.id?(a(),l("div",Yt,[o("span",{class:"tw-text-xs tw-font-mono tw-cursor-pointer",title:ft(n),onClick:m(u=>St(n,s.date_info.date,r),["stop"])},v(pt(n)),9,Dt),n.reply_status==="å·²å›è¦†"?(a(),l("button",{key:0,onClick:m(u=>Ut(n.id,s.date_info.date,r),["stop"]),title:"ç¢ºèªå›è¦†",class:"tw-ml-1 tw-px-1.5 tw-py-0.5 tw-text-xs tw-bg-green-500 tw-text-white tw-rounded hover:tw-bg-green-600"}," âœ… ",8,te)):g("",!0)])):g("",!0),e[8]||(e[8]=o("span",{class:"tw-ml-2 tw-text-gray-400 tw-text-xs"},"â–¼",-1))],10,Qt),b.value===`${s.date_info.date}-${r}`?(a(),l("div",ee,[x.value===1?(a(),l("div",se,[$.value?(a(),l("div",{key:0,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-blue-600 tw-font-bold tw-border-b hover:tw-bg-gray-100",onClick:m(u=>J(s.date_info.date,r,$.value.id,$.value.name),["stop"])}," â¡ï¸ åŒä¸Š ("+v($.value.name)+") ",9,ne)):g("",!0),o("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:m(u=>J(s.date_info.date,r,"","-- æœªé ç´„ --"),["stop"])},"-- æœªé ç´„ --",8,re),(a(!0),l(S,null,U(Q.value,u=>(a(),l("div",{key:u,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:m(i=>et(u),["stop"])},v(u),9,oe))),128))])):g("",!0),x.value===2?(a(),l("div",ie,[o("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[2]||(e[2]=m(u=>x.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),(a(!0),l(S,null,U(B.value,u=>(a(),l("div",{key:u.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:m(i=>st(s.date_info.date,r,u),["stop"])},v(u.name),9,le))),128))])):g("",!0)])):g("",!0)],42,qt)]))),128))]),s.is_closed?g("",!0):(a(),l("div",ae,[e[9]||(e[9]=o("h4",{class:"tw-text-sm tw-font-semibold tw-text-gray-500 tw-mb-2"},"å‚™å–åå–®",-1)),o("div",we,[!s.waiting_list||s.waiting_list.length===0?(a(),l("div",ue,"å°šç„¡å‚™å–")):g("",!0),(a(!0),l(S,null,U(s.waiting_list,n=>(a(),l("div",{key:n.id,class:"tw-flex tw-items-center tw-justify-between tw-p-1.5 tw-bg-yellow-50 tw-border tw-border-yellow-200 tw-rounded tw-cursor-grab",draggable:"true",onDragstart:r=>ht(r,n)},[o("span",null,v(n.user_name),1),o("button",{onClick:r=>yt(n.id,s.date_info.date),class:"tw-text-red-500 hover:tw-text-red-700 tw-text-xs"},"âœ•",8,ce)],40,de))),128))]),o("div",pe,[o("button",{onClick:n=>_t(s.date_info.date),class:"tw-w-full tw-text-xs tw-text-center tw-py-1.5 tw-bg-gray-100 hover:tw-bg-gray-200 tw-rounded-md tw-text-gray-600"},"+ æ–°å¢å‚™å–",8,fe),b.value===`waiting-${s.date_info.date}`?(a(),l("div",ve,[x.value===1?(a(),l("div",ge,[(a(!0),l(S,null,U(Q.value,n=>(a(),l("div",{key:n,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:m(r=>et(n),["stop"])},v(n),9,_e))),128))])):g("",!0),x.value===2?(a(),l("div",me,[o("div",{class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-font-bold tw-border-b tw-text-purple-700 hover:tw-bg-gray-100",onClick:e[3]||(e[3]=m(n=>x.value=1,["stop"]))},"â† è¿”å›æ³¨éŸ³"),(a(!0),l(S,null,U(B.value,n=>(a(),l("div",{key:n.id,class:"tw-px-2.5 tw-py-2 tw-cursor-pointer tw-text-sm tw-text-gray-800 hover:tw-bg-gray-100",onClick:m(r=>st(s.date_info.date,null,n),["stop"])},v(n.name),9,ye))),128))])):g("",!0)])):g("",!0)])])),s.is_closed?g("",!0):(a(),l("button",{key:1,class:C(["tw-mt-2 tw-w-full tw-px-4 tw-py-2 tw-rounded-md tw-text-sm tw-font-medium tw-transition disabled:tw-cursor-not-allowed",ct(s)]),onClick:n=>Ct(s.date_info.date,s.date_info.day_name),disabled:E.value[s.date_info.date]||!F(s)},v(dt(s)),11,he))],2))),128))])),T.value.show?(a(),l("div",{key:2,class:C(["tw-fixed tw-top-5 tw-right-5 tw-px-5 tw-py-4 tw-rounded-md tw-shadow-lg tw-text-white",T.value.type==="success"?"tw-bg-gray-800":"tw-bg-red-700"])},v(T.value.message),3)):g("",!0),K.value?(a(),l("div",xe,[o("div",be,[e[10]||(e[10]=o("h3",{class:"tw-text-lg tw-font-bold tw-mb-4"},"æ–°å¢è‡¨æ™‚ç”¨æˆ¶",-1)),jt(o("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>W.value=s),placeholder:"è«‹è¼¸å…¥ç”¨æˆ¶å§“å",class:"tw-mt-1 tw-block tw-w-full tw-px-3 tw-py-2 tw-border tw-border-gray-300 tw-rounded-md tw-shadow-sm focus:tw-outline-none focus:tw-ring-indigo-500 focus:tw-border-indigo-500 sm:tw-text-sm",onKeyup:Wt(rt,["enter"])},null,544),[[Et,W.value]]),o("div",ke,[o("button",{onClick:nt,class:"tw-px-4 tw-py-2 tw-bg-gray-300 tw-text-gray-800 tw-rounded-md hover:tw-bg-gray-400"}," å–æ¶ˆ "),o("button",{onClick:rt,disabled:V.value||!W.value.trim(),class:"tw-px-4 tw-py-2 tw-bg-indigo-600 tw-text-white tw-rounded-md hover:tw-bg-indigo-700 disabled:tw-opacity-50 disabled:tw-cursor-not-allowed"},[V.value?(a(),l("span",Ce,"æ–°å¢ä¸­...")):(a(),l("span",Se,"ç¢ºå®šæ–°å¢"))],8,$e)])])])):g("",!0)]))}};Lt(Ue).mount("#app");
